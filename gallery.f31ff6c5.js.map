{"mappings":"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","sources":["client_src/js/fade.js","node_modules/@tweenjs/tween.js/dist/tween.umd.js","client_src/js/gamepad.js","client_src/js/gallery.js","node_modules/three/examples/jsm/webxr/VRButton.js","node_modules/three/examples/jsm/webxr/XRControllerModelFactory.js","node_modules/three/examples/jsm/libs/motion-controllers.module.js","node_modules/three/examples/jsm/webxr/XRHandModelFactory.js","node_modules/three/examples/jsm/webxr/XRHandPrimitiveModel.js","node_modules/three/examples/jsm/webxr/XRHandMeshModel.js","client_src/js/controllers.js","client_src/js/locomotion.js"],"sourcesContent":["import {\n    Mesh,\n    MeshBasicMaterial,\n    SphereBufferGeometry,\n    BackSide\n} from 'three';\n\nimport TWEEN from '@tweenjs/tween.js/dist/tween.umd.js';\n\n\nmodule.exports = (camera, cameraGroup) => {\n\n    function locomotion(offset) {\n\n        blinkerSphere.visible = true;\n        blinkerSphere.material.opacity = 0;\n        new TWEEN.Tween(blinkerSphere.material)\n            .to({opacity: 1}, 200)\n            .easing(TWEEN.Easing.Quadratic.Out)\n            .onComplete(function () {\n\n                // Do the teleport\n                cameraGroup.position.add(offset);\n\n                // Fade back\n                new TWEEN.Tween(blinkerSphere.material)\n                    .to({opacity: 0}, 200)\n                    .onComplete(() => blinkerSphere.visible = false)\n                    .start();\n            })\n            .start();\n    }\n\n    const blinkerSphereGeometry = new SphereBufferGeometry(0.3, 16, 16);\n    blinkerSphereGeometry.translate(0, 0.3, 0);\n\n    const blinkerSphereMaterial = new MeshBasicMaterial({\n        side: BackSide,\n        color: 0x000000,\n        transparent: true\n    });\n\n    const blinkerSphere = new Mesh(blinkerSphereGeometry, blinkerSphereMaterial);\n    blinkerSphere.rotation.set(Math.PI / 2, 0, 0);\n    blinkerSphere.position.set(0, 0, -0.3);\n    blinkerSphere.visible = false;\n    camera.add(blinkerSphere);\n    blinkerSphereMaterial.renderOrder = -101;\n\n    return locomotion;\n\n}","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports) :\n    typeof define === 'function' && define.amd ? define(['exports'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.TWEEN = {}));\n}(this, (function (exports) { 'use strict';\n\n    /**\n     * The Ease class provides a collection of easing functions for use with tween.js.\n     */\n    var Easing = {\n        Linear: {\n            None: function (amount) {\n                return amount;\n            },\n        },\n        Quadratic: {\n            In: function (amount) {\n                return amount * amount;\n            },\n            Out: function (amount) {\n                return amount * (2 - amount);\n            },\n            InOut: function (amount) {\n                if ((amount *= 2) < 1) {\n                    return 0.5 * amount * amount;\n                }\n                return -0.5 * (--amount * (amount - 2) - 1);\n            },\n        },\n        Cubic: {\n            In: function (amount) {\n                return amount * amount * amount;\n            },\n            Out: function (amount) {\n                return --amount * amount * amount + 1;\n            },\n            InOut: function (amount) {\n                if ((amount *= 2) < 1) {\n                    return 0.5 * amount * amount * amount;\n                }\n                return 0.5 * ((amount -= 2) * amount * amount + 2);\n            },\n        },\n        Quartic: {\n            In: function (amount) {\n                return amount * amount * amount * amount;\n            },\n            Out: function (amount) {\n                return 1 - --amount * amount * amount * amount;\n            },\n            InOut: function (amount) {\n                if ((amount *= 2) < 1) {\n                    return 0.5 * amount * amount * amount * amount;\n                }\n                return -0.5 * ((amount -= 2) * amount * amount * amount - 2);\n            },\n        },\n        Quintic: {\n            In: function (amount) {\n                return amount * amount * amount * amount * amount;\n            },\n            Out: function (amount) {\n                return --amount * amount * amount * amount * amount + 1;\n            },\n            InOut: function (amount) {\n                if ((amount *= 2) < 1) {\n                    return 0.5 * amount * amount * amount * amount * amount;\n                }\n                return 0.5 * ((amount -= 2) * amount * amount * amount * amount + 2);\n            },\n        },\n        Sinusoidal: {\n            In: function (amount) {\n                return 1 - Math.cos((amount * Math.PI) / 2);\n            },\n            Out: function (amount) {\n                return Math.sin((amount * Math.PI) / 2);\n            },\n            InOut: function (amount) {\n                return 0.5 * (1 - Math.cos(Math.PI * amount));\n            },\n        },\n        Exponential: {\n            In: function (amount) {\n                return amount === 0 ? 0 : Math.pow(1024, amount - 1);\n            },\n            Out: function (amount) {\n                return amount === 1 ? 1 : 1 - Math.pow(2, -10 * amount);\n            },\n            InOut: function (amount) {\n                if (amount === 0) {\n                    return 0;\n                }\n                if (amount === 1) {\n                    return 1;\n                }\n                if ((amount *= 2) < 1) {\n                    return 0.5 * Math.pow(1024, amount - 1);\n                }\n                return 0.5 * (-Math.pow(2, -10 * (amount - 1)) + 2);\n            },\n        },\n        Circular: {\n            In: function (amount) {\n                return 1 - Math.sqrt(1 - amount * amount);\n            },\n            Out: function (amount) {\n                return Math.sqrt(1 - --amount * amount);\n            },\n            InOut: function (amount) {\n                if ((amount *= 2) < 1) {\n                    return -0.5 * (Math.sqrt(1 - amount * amount) - 1);\n                }\n                return 0.5 * (Math.sqrt(1 - (amount -= 2) * amount) + 1);\n            },\n        },\n        Elastic: {\n            In: function (amount) {\n                if (amount === 0) {\n                    return 0;\n                }\n                if (amount === 1) {\n                    return 1;\n                }\n                return -Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n            },\n            Out: function (amount) {\n                if (amount === 0) {\n                    return 0;\n                }\n                if (amount === 1) {\n                    return 1;\n                }\n                return Math.pow(2, -10 * amount) * Math.sin((amount - 0.1) * 5 * Math.PI) + 1;\n            },\n            InOut: function (amount) {\n                if (amount === 0) {\n                    return 0;\n                }\n                if (amount === 1) {\n                    return 1;\n                }\n                amount *= 2;\n                if (amount < 1) {\n                    return -0.5 * Math.pow(2, 10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI);\n                }\n                return 0.5 * Math.pow(2, -10 * (amount - 1)) * Math.sin((amount - 1.1) * 5 * Math.PI) + 1;\n            },\n        },\n        Back: {\n            In: function (amount) {\n                var s = 1.70158;\n                return amount * amount * ((s + 1) * amount - s);\n            },\n            Out: function (amount) {\n                var s = 1.70158;\n                return --amount * amount * ((s + 1) * amount + s) + 1;\n            },\n            InOut: function (amount) {\n                var s = 1.70158 * 1.525;\n                if ((amount *= 2) < 1) {\n                    return 0.5 * (amount * amount * ((s + 1) * amount - s));\n                }\n                return 0.5 * ((amount -= 2) * amount * ((s + 1) * amount + s) + 2);\n            },\n        },\n        Bounce: {\n            In: function (amount) {\n                return 1 - Easing.Bounce.Out(1 - amount);\n            },\n            Out: function (amount) {\n                if (amount < 1 / 2.75) {\n                    return 7.5625 * amount * amount;\n                }\n                else if (amount < 2 / 2.75) {\n                    return 7.5625 * (amount -= 1.5 / 2.75) * amount + 0.75;\n                }\n                else if (amount < 2.5 / 2.75) {\n                    return 7.5625 * (amount -= 2.25 / 2.75) * amount + 0.9375;\n                }\n                else {\n                    return 7.5625 * (amount -= 2.625 / 2.75) * amount + 0.984375;\n                }\n            },\n            InOut: function (amount) {\n                if (amount < 0.5) {\n                    return Easing.Bounce.In(amount * 2) * 0.5;\n                }\n                return Easing.Bounce.Out(amount * 2 - 1) * 0.5 + 0.5;\n            },\n        },\n    };\n\n    var now;\n    // Include a performance.now polyfill.\n    // In node.js, use process.hrtime.\n    // eslint-disable-next-line\n    // @ts-ignore\n    if (typeof self === 'undefined' && typeof process !== 'undefined' && process.hrtime) {\n        now = function () {\n            // eslint-disable-next-line\n            // @ts-ignore\n            var time = process.hrtime();\n            // Convert [seconds, nanoseconds] to milliseconds.\n            return time[0] * 1000 + time[1] / 1000000;\n        };\n    }\n    // In a browser, use self.performance.now if it is available.\n    else if (typeof self !== 'undefined' && self.performance !== undefined && self.performance.now !== undefined) {\n        // This must be bound, because directly assigning this function\n        // leads to an invocation exception in Chrome.\n        now = self.performance.now.bind(self.performance);\n    }\n    // Use Date.now if it is available.\n    else if (Date.now !== undefined) {\n        now = Date.now;\n    }\n    // Otherwise, use 'new Date().getTime()'.\n    else {\n        now = function () {\n            return new Date().getTime();\n        };\n    }\n    var now$1 = now;\n\n    /**\n     * Controlling groups of tweens\n     *\n     * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n     * In these cases, you may want to create your own smaller groups of tween\n     */\n    var Group = /** @class */ (function () {\n        function Group() {\n            this._tweens = {};\n            this._tweensAddedDuringUpdate = {};\n        }\n        Group.prototype.getAll = function () {\n            var _this = this;\n            return Object.keys(this._tweens).map(function (tweenId) {\n                return _this._tweens[tweenId];\n            });\n        };\n        Group.prototype.removeAll = function () {\n            this._tweens = {};\n        };\n        Group.prototype.add = function (tween) {\n            this._tweens[tween.getId()] = tween;\n            this._tweensAddedDuringUpdate[tween.getId()] = tween;\n        };\n        Group.prototype.remove = function (tween) {\n            delete this._tweens[tween.getId()];\n            delete this._tweensAddedDuringUpdate[tween.getId()];\n        };\n        Group.prototype.update = function (time, preserve) {\n            if (time === void 0) { time = now$1(); }\n            if (preserve === void 0) { preserve = false; }\n            var tweenIds = Object.keys(this._tweens);\n            if (tweenIds.length === 0) {\n                return false;\n            }\n            // Tweens are updated in \"batches\". If you add a new tween during an\n            // update, then the new tween will be updated in the next batch.\n            // If you remove a tween during an update, it may or may not be updated.\n            // However, if the removed tween was added during the current batch,\n            // then it will not be updated.\n            while (tweenIds.length > 0) {\n                this._tweensAddedDuringUpdate = {};\n                for (var i = 0; i < tweenIds.length; i++) {\n                    var tween = this._tweens[tweenIds[i]];\n                    var autoStart = !preserve;\n                    if (tween && tween.update(time, autoStart) === false && !preserve) {\n                        delete this._tweens[tweenIds[i]];\n                    }\n                }\n                tweenIds = Object.keys(this._tweensAddedDuringUpdate);\n            }\n            return true;\n        };\n        return Group;\n    }());\n\n    /**\n     *\n     */\n    var Interpolation = {\n        Linear: function (v, k) {\n            var m = v.length - 1;\n            var f = m * k;\n            var i = Math.floor(f);\n            var fn = Interpolation.Utils.Linear;\n            if (k < 0) {\n                return fn(v[0], v[1], f);\n            }\n            if (k > 1) {\n                return fn(v[m], v[m - 1], m - f);\n            }\n            return fn(v[i], v[i + 1 > m ? m : i + 1], f - i);\n        },\n        Bezier: function (v, k) {\n            var b = 0;\n            var n = v.length - 1;\n            var pw = Math.pow;\n            var bn = Interpolation.Utils.Bernstein;\n            for (var i = 0; i <= n; i++) {\n                b += pw(1 - k, n - i) * pw(k, i) * v[i] * bn(n, i);\n            }\n            return b;\n        },\n        CatmullRom: function (v, k) {\n            var m = v.length - 1;\n            var f = m * k;\n            var i = Math.floor(f);\n            var fn = Interpolation.Utils.CatmullRom;\n            if (v[0] === v[m]) {\n                if (k < 0) {\n                    i = Math.floor((f = m * (1 + k)));\n                }\n                return fn(v[(i - 1 + m) % m], v[i], v[(i + 1) % m], v[(i + 2) % m], f - i);\n            }\n            else {\n                if (k < 0) {\n                    return v[0] - (fn(v[0], v[0], v[1], v[1], -f) - v[0]);\n                }\n                if (k > 1) {\n                    return v[m] - (fn(v[m], v[m], v[m - 1], v[m - 1], f - m) - v[m]);\n                }\n                return fn(v[i ? i - 1 : 0], v[i], v[m < i + 1 ? m : i + 1], v[m < i + 2 ? m : i + 2], f - i);\n            }\n        },\n        Utils: {\n            Linear: function (p0, p1, t) {\n                return (p1 - p0) * t + p0;\n            },\n            Bernstein: function (n, i) {\n                var fc = Interpolation.Utils.Factorial;\n                return fc(n) / fc(i) / fc(n - i);\n            },\n            Factorial: (function () {\n                var a = [1];\n                return function (n) {\n                    var s = 1;\n                    if (a[n]) {\n                        return a[n];\n                    }\n                    for (var i = n; i > 1; i--) {\n                        s *= i;\n                    }\n                    a[n] = s;\n                    return s;\n                };\n            })(),\n            CatmullRom: function (p0, p1, p2, p3, t) {\n                var v0 = (p2 - p0) * 0.5;\n                var v1 = (p3 - p1) * 0.5;\n                var t2 = t * t;\n                var t3 = t * t2;\n                return (2 * p1 - 2 * p2 + v0 + v1) * t3 + (-3 * p1 + 3 * p2 - 2 * v0 - v1) * t2 + v0 * t + p1;\n            },\n        },\n    };\n\n    /**\n     * Utils\n     */\n    var Sequence = /** @class */ (function () {\n        function Sequence() {\n        }\n        Sequence.nextId = function () {\n            return Sequence._nextId++;\n        };\n        Sequence._nextId = 0;\n        return Sequence;\n    }());\n\n    var mainGroup = new Group();\n\n    /**\n     * Tween.js - Licensed under the MIT license\n     * https://github.com/tweenjs/tween.js\n     * ----------------------------------------------\n     *\n     * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n     * Thank you all, you're awesome!\n     */\n    var Tween = /** @class */ (function () {\n        function Tween(_object, _group) {\n            if (_group === void 0) { _group = mainGroup; }\n            this._object = _object;\n            this._group = _group;\n            this._isPaused = false;\n            this._pauseStart = 0;\n            this._valuesStart = {};\n            this._valuesEnd = {};\n            this._valuesStartRepeat = {};\n            this._duration = 1000;\n            this._initialRepeat = 0;\n            this._repeat = 0;\n            this._yoyo = false;\n            this._isPlaying = false;\n            this._reversed = false;\n            this._delayTime = 0;\n            this._startTime = 0;\n            this._easingFunction = Easing.Linear.None;\n            this._interpolationFunction = Interpolation.Linear;\n            this._chainedTweens = [];\n            this._onStartCallbackFired = false;\n            this._id = Sequence.nextId();\n            this._isChainStopped = false;\n            this._goToEnd = false;\n        }\n        Tween.prototype.getId = function () {\n            return this._id;\n        };\n        Tween.prototype.isPlaying = function () {\n            return this._isPlaying;\n        };\n        Tween.prototype.isPaused = function () {\n            return this._isPaused;\n        };\n        Tween.prototype.to = function (properties, duration) {\n            // TODO? restore this, then update the 07_dynamic_to example to set fox\n            // tween's to on each update. That way the behavior is opt-in (there's\n            // currently no opt-out).\n            // for (const prop in properties) this._valuesEnd[prop] = properties[prop]\n            this._valuesEnd = Object.create(properties);\n            if (duration !== undefined) {\n                this._duration = duration;\n            }\n            return this;\n        };\n        Tween.prototype.duration = function (d) {\n            this._duration = d;\n            return this;\n        };\n        Tween.prototype.start = function (time) {\n            if (this._isPlaying) {\n                return this;\n            }\n            // eslint-disable-next-line\n            this._group && this._group.add(this);\n            this._repeat = this._initialRepeat;\n            if (this._reversed) {\n                // If we were reversed (f.e. using the yoyo feature) then we need to\n                // flip the tween direction back to forward.\n                this._reversed = false;\n                for (var property in this._valuesStartRepeat) {\n                    this._swapEndStartRepeatValues(property);\n                    this._valuesStart[property] = this._valuesStartRepeat[property];\n                }\n            }\n            this._isPlaying = true;\n            this._isPaused = false;\n            this._onStartCallbackFired = false;\n            this._isChainStopped = false;\n            this._startTime = time !== undefined ? (typeof time === 'string' ? now$1() + parseFloat(time) : time) : now$1();\n            this._startTime += this._delayTime;\n            this._setupProperties(this._object, this._valuesStart, this._valuesEnd, this._valuesStartRepeat);\n            return this;\n        };\n        Tween.prototype._setupProperties = function (_object, _valuesStart, _valuesEnd, _valuesStartRepeat) {\n            for (var property in _valuesEnd) {\n                var startValue = _object[property];\n                var startValueIsArray = Array.isArray(startValue);\n                var propType = startValueIsArray ? 'array' : typeof startValue;\n                var isInterpolationList = !startValueIsArray && Array.isArray(_valuesEnd[property]);\n                // If `to()` specifies a property that doesn't exist in the source object,\n                // we should not set that property in the object\n                if (propType === 'undefined' || propType === 'function') {\n                    continue;\n                }\n                // Check if an Array was provided as property value\n                if (isInterpolationList) {\n                    var endValues = _valuesEnd[property];\n                    if (endValues.length === 0) {\n                        continue;\n                    }\n                    // handle an array of relative values\n                    endValues = endValues.map(this._handleRelativeValue.bind(this, startValue));\n                    // Create a local copy of the Array with the start value at the front\n                    _valuesEnd[property] = [startValue].concat(endValues);\n                }\n                // handle the deepness of the values\n                if ((propType === 'object' || startValueIsArray) && startValue && !isInterpolationList) {\n                    _valuesStart[property] = startValueIsArray ? [] : {};\n                    // eslint-disable-next-line\n                    for (var prop in startValue) {\n                        // eslint-disable-next-line\n                        // @ts-ignore FIXME?\n                        _valuesStart[property][prop] = startValue[prop];\n                    }\n                    _valuesStartRepeat[property] = startValueIsArray ? [] : {}; // TODO? repeat nested values? And yoyo? And array values?\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    this._setupProperties(startValue, _valuesStart[property], _valuesEnd[property], _valuesStartRepeat[property]);\n                }\n                else {\n                    // Save the starting value, but only once.\n                    if (typeof _valuesStart[property] === 'undefined') {\n                        _valuesStart[property] = startValue;\n                    }\n                    if (!startValueIsArray) {\n                        // eslint-disable-next-line\n                        // @ts-ignore FIXME?\n                        _valuesStart[property] *= 1.0; // Ensures we're using numbers, not strings\n                    }\n                    if (isInterpolationList) {\n                        // eslint-disable-next-line\n                        // @ts-ignore FIXME?\n                        _valuesStartRepeat[property] = _valuesEnd[property].slice().reverse();\n                    }\n                    else {\n                        _valuesStartRepeat[property] = _valuesStart[property] || 0;\n                    }\n                }\n            }\n        };\n        Tween.prototype.stop = function () {\n            if (!this._isChainStopped) {\n                this._isChainStopped = true;\n                this.stopChainedTweens();\n            }\n            if (!this._isPlaying) {\n                return this;\n            }\n            // eslint-disable-next-line\n            this._group && this._group.remove(this);\n            this._isPlaying = false;\n            this._isPaused = false;\n            if (this._onStopCallback) {\n                this._onStopCallback(this._object);\n            }\n            return this;\n        };\n        Tween.prototype.end = function () {\n            this._goToEnd = true;\n            this.update(Infinity);\n            return this;\n        };\n        Tween.prototype.pause = function (time) {\n            if (time === void 0) { time = now$1(); }\n            if (this._isPaused || !this._isPlaying) {\n                return this;\n            }\n            this._isPaused = true;\n            this._pauseStart = time;\n            // eslint-disable-next-line\n            this._group && this._group.remove(this);\n            return this;\n        };\n        Tween.prototype.resume = function (time) {\n            if (time === void 0) { time = now$1(); }\n            if (!this._isPaused || !this._isPlaying) {\n                return this;\n            }\n            this._isPaused = false;\n            this._startTime += time - this._pauseStart;\n            this._pauseStart = 0;\n            // eslint-disable-next-line\n            this._group && this._group.add(this);\n            return this;\n        };\n        Tween.prototype.stopChainedTweens = function () {\n            for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                this._chainedTweens[i].stop();\n            }\n            return this;\n        };\n        Tween.prototype.group = function (group) {\n            this._group = group;\n            return this;\n        };\n        Tween.prototype.delay = function (amount) {\n            this._delayTime = amount;\n            return this;\n        };\n        Tween.prototype.repeat = function (times) {\n            this._initialRepeat = times;\n            this._repeat = times;\n            return this;\n        };\n        Tween.prototype.repeatDelay = function (amount) {\n            this._repeatDelayTime = amount;\n            return this;\n        };\n        Tween.prototype.yoyo = function (yoyo) {\n            this._yoyo = yoyo;\n            return this;\n        };\n        Tween.prototype.easing = function (easingFunction) {\n            this._easingFunction = easingFunction;\n            return this;\n        };\n        Tween.prototype.interpolation = function (interpolationFunction) {\n            this._interpolationFunction = interpolationFunction;\n            return this;\n        };\n        Tween.prototype.chain = function () {\n            var tweens = [];\n            for (var _i = 0; _i < arguments.length; _i++) {\n                tweens[_i] = arguments[_i];\n            }\n            this._chainedTweens = tweens;\n            return this;\n        };\n        Tween.prototype.onStart = function (callback) {\n            this._onStartCallback = callback;\n            return this;\n        };\n        Tween.prototype.onUpdate = function (callback) {\n            this._onUpdateCallback = callback;\n            return this;\n        };\n        Tween.prototype.onRepeat = function (callback) {\n            this._onRepeatCallback = callback;\n            return this;\n        };\n        Tween.prototype.onComplete = function (callback) {\n            this._onCompleteCallback = callback;\n            return this;\n        };\n        Tween.prototype.onStop = function (callback) {\n            this._onStopCallback = callback;\n            return this;\n        };\n        /**\n         * @returns true if the tween is still playing after the update, false\n         * otherwise (calling update on a paused tween still returns true because\n         * it is still playing, just paused).\n         */\n        Tween.prototype.update = function (time, autoStart) {\n            if (time === void 0) { time = now$1(); }\n            if (autoStart === void 0) { autoStart = true; }\n            if (this._isPaused)\n                return true;\n            var property;\n            var elapsed;\n            var endTime = this._startTime + this._duration;\n            if (!this._goToEnd && !this._isPlaying) {\n                if (time > endTime)\n                    return false;\n                if (autoStart)\n                    this.start(time);\n            }\n            this._goToEnd = false;\n            if (time < this._startTime) {\n                return true;\n            }\n            if (this._onStartCallbackFired === false) {\n                if (this._onStartCallback) {\n                    this._onStartCallback(this._object);\n                }\n                this._onStartCallbackFired = true;\n            }\n            elapsed = (time - this._startTime) / this._duration;\n            elapsed = this._duration === 0 || elapsed > 1 ? 1 : elapsed;\n            var value = this._easingFunction(elapsed);\n            // properties transformations\n            this._updateProperties(this._object, this._valuesStart, this._valuesEnd, value);\n            if (this._onUpdateCallback) {\n                this._onUpdateCallback(this._object, elapsed);\n            }\n            if (elapsed === 1) {\n                if (this._repeat > 0) {\n                    if (isFinite(this._repeat)) {\n                        this._repeat--;\n                    }\n                    // Reassign starting values, restart by making startTime = now\n                    for (property in this._valuesStartRepeat) {\n                        if (!this._yoyo && typeof this._valuesEnd[property] === 'string') {\n                            this._valuesStartRepeat[property] =\n                                // eslint-disable-next-line\n                                // @ts-ignore FIXME?\n                                this._valuesStartRepeat[property] + parseFloat(this._valuesEnd[property]);\n                        }\n                        if (this._yoyo) {\n                            this._swapEndStartRepeatValues(property);\n                        }\n                        this._valuesStart[property] = this._valuesStartRepeat[property];\n                    }\n                    if (this._yoyo) {\n                        this._reversed = !this._reversed;\n                    }\n                    if (this._repeatDelayTime !== undefined) {\n                        this._startTime = time + this._repeatDelayTime;\n                    }\n                    else {\n                        this._startTime = time + this._delayTime;\n                    }\n                    if (this._onRepeatCallback) {\n                        this._onRepeatCallback(this._object);\n                    }\n                    return true;\n                }\n                else {\n                    if (this._onCompleteCallback) {\n                        this._onCompleteCallback(this._object);\n                    }\n                    for (var i = 0, numChainedTweens = this._chainedTweens.length; i < numChainedTweens; i++) {\n                        // Make the chained tweens start exactly at the time they should,\n                        // even if the `update()` method was called way past the duration of the tween\n                        this._chainedTweens[i].start(this._startTime + this._duration);\n                    }\n                    this._isPlaying = false;\n                    return false;\n                }\n            }\n            return true;\n        };\n        Tween.prototype._updateProperties = function (_object, _valuesStart, _valuesEnd, value) {\n            for (var property in _valuesEnd) {\n                // Don't update properties that do not exist in the source object\n                if (_valuesStart[property] === undefined) {\n                    continue;\n                }\n                var start = _valuesStart[property] || 0;\n                var end = _valuesEnd[property];\n                var startIsArray = Array.isArray(_object[property]);\n                var endIsArray = Array.isArray(end);\n                var isInterpolationList = !startIsArray && endIsArray;\n                if (isInterpolationList) {\n                    _object[property] = this._interpolationFunction(end, value);\n                }\n                else if (typeof end === 'object' && end) {\n                    // eslint-disable-next-line\n                    // @ts-ignore FIXME?\n                    this._updateProperties(_object[property], start, end, value);\n                }\n                else {\n                    // Parses relative end values with start as base (e.g.: +10, -3)\n                    end = this._handleRelativeValue(start, end);\n                    // Protect against non numeric properties.\n                    if (typeof end === 'number') {\n                        // eslint-disable-next-line\n                        // @ts-ignore FIXME?\n                        _object[property] = start + (end - start) * value;\n                    }\n                }\n            }\n        };\n        Tween.prototype._handleRelativeValue = function (start, end) {\n            if (typeof end !== 'string') {\n                return end;\n            }\n            if (end.charAt(0) === '+' || end.charAt(0) === '-') {\n                return start + parseFloat(end);\n            }\n            else {\n                return parseFloat(end);\n            }\n        };\n        Tween.prototype._swapEndStartRepeatValues = function (property) {\n            var tmp = this._valuesStartRepeat[property];\n            var endValue = this._valuesEnd[property];\n            if (typeof endValue === 'string') {\n                this._valuesStartRepeat[property] = this._valuesStartRepeat[property] + parseFloat(endValue);\n            }\n            else {\n                this._valuesStartRepeat[property] = this._valuesEnd[property];\n            }\n            this._valuesEnd[property] = tmp;\n        };\n        return Tween;\n    }());\n\n    var VERSION = '18.6.4';\n\n    /**\n     * Tween.js - Licensed under the MIT license\n     * https://github.com/tweenjs/tween.js\n     * ----------------------------------------------\n     *\n     * See https://github.com/tweenjs/tween.js/graphs/contributors for the full list of contributors.\n     * Thank you all, you're awesome!\n     */\n    var nextId = Sequence.nextId;\n    /**\n     * Controlling groups of tweens\n     *\n     * Using the TWEEN singleton to manage your tweens can cause issues in large apps with many components.\n     * In these cases, you may want to create your own smaller groups of tweens.\n     */\n    var TWEEN = mainGroup;\n    // This is the best way to export things in a way that's compatible with both ES\n    // Modules and CommonJS, without build hacks, and so as not to break the\n    // existing API.\n    // https://github.com/rollup/rollup/issues/1961#issuecomment-423037881\n    var getAll = TWEEN.getAll.bind(TWEEN);\n    var removeAll = TWEEN.removeAll.bind(TWEEN);\n    var add = TWEEN.add.bind(TWEEN);\n    var remove = TWEEN.remove.bind(TWEEN);\n    var update = TWEEN.update.bind(TWEEN);\n    var exports$1 = {\n        Easing: Easing,\n        Group: Group,\n        Interpolation: Interpolation,\n        now: now$1,\n        Sequence: Sequence,\n        nextId: nextId,\n        Tween: Tween,\n        VERSION: VERSION,\n        getAll: getAll,\n        removeAll: removeAll,\n        add: add,\n        remove: remove,\n        update: update,\n    };\n\n    exports.Easing = Easing;\n    exports.Group = Group;\n    exports.Interpolation = Interpolation;\n    exports.Sequence = Sequence;\n    exports.Tween = Tween;\n    exports.VERSION = VERSION;\n    exports.add = add;\n    exports.default = exports$1;\n    exports.getAll = getAll;\n    exports.nextId = nextId;\n    exports.now = now$1;\n    exports.remove = remove;\n    exports.removeAll = removeAll;\n    exports.update = update;\n\n    Object.defineProperty(exports, '__esModule', { value: true });\n\n})));\n","//import { update } from './handposes/index.js'\n\n\nmodule.exports.get = (renderer, rafCallbacks) => {\n\n    const prevGamePads = new Map();\n    const gamepad = new EventTarget();\n\n    function dispatchEvent(type, detail) {\n        const specificEvent = new CustomEvent(type, {detail});\n\n        const generalDetail = {type};\n        Object.assign(generalDetail, detail);\n        const generalEvent = new CustomEvent('gamepadInteraction', {detail: generalDetail});\n\n        gamepad.dispatchEvent(specificEvent);\n        gamepad.dispatchEvent(generalEvent);\n    }\n\n    rafCallbacks.add((timestamp, frame) => {\n\n        const session = renderer.xr.getSession();\n        //update(renderer.xr.getReferenceSpace(), frame);\n        let i = 0;\n        if (session) for (const source of session.inputSources) {\n            if (!source.gamepad) continue;\n            const controller = renderer.xr.getController(i++);\n            const old = prevGamePads.get(source);\n            const data = {\n                buttons: source.gamepad.buttons.map(b => b.value),\n                axes: source.gamepad.axes.slice(0)\n            };\n            if (old) {\n                data.buttons.forEach((value,i)=>{\n                    if (value !== old.buttons[i]) {\n                        if (value === 1) {\n                            dispatchEvent(`button${i}Down`, {value, source, controller,data});\n                        } else {\n                            dispatchEvent(`button${i}Up`, {value, source, controller,data});\n                        }\n                    }\n                });\n                data.axes.forEach((value,i)=>{\n                    if (value !== old.axes[i]) {\n                        dispatchEvent(`axes${i}Move`, {value, source, controller,data});\n                        if (old.axes[i] === 0) {\n                            dispatchEvent(`axes${i}MoveStart`, {value, source, controller,data});\n                        }\n                        if (Math.abs(old.axes[i]) < 0.5 && Math.abs(value) > 0.5) {\n                            dispatchEvent(`axes${i}MoveMiddle`, {value, source, controller,data});\n                        }\n                        if (value === 0) {\n                            dispatchEvent(`axes${i}MoveEnd`, {value, source, controller,data});\n                        }\n                    }\n                });\n            }\n            prevGamePads.set(source, data);\n        }\n    });\n\n    return gamepad;\n}","require('dotenv').config();\n\nimport Web3 from 'web3';\nimport abi from '../../contracts/abi.json';\n\nconst loader = require('../js/blocking-loader');\nconst galleriesPresets = require('../js/galleries-presets');\nconst controllers = require('./controllers');\nconst locomotion = require('./locomotion');\n\nconst { displayPainting, clearPaintings } = require('../js/display-paintings');\n\nlet gallery;\nlet web3;\nlet contract;\n\nconst contractAddrReg = new RegExp('^0x[a-fA-F0-9]{40}$');\n\nconst queryParams = new Proxy(new URLSearchParams(window.location.search), {\n    get: (searchParams, prop) => searchParams.get(prop),\n});\n\nimport * as THREE from 'three';\nimport { GLTFLoader } from 'three/examples/jsm/loaders/GLTFLoader';\nimport { OrbitControls } from 'three/examples/jsm/controls/OrbitControls';\nimport { VRButton } from 'three/examples/jsm/webxr/VRButton.js';\nimport { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js';\n\nconst gltfLoader = new GLTFLoader();\nconst scene = new THREE.Scene();\nlet camera = new THREE.PerspectiveCamera(\n    75,\n    window.innerWidth / window.innerHeight,\n    0.1,\n    1000\n);\n\nconst cameraGroup = new THREE.Group();\ncameraGroup.add(camera);\n\nconst renderer = new THREE.WebGLRenderer({ antialias: true });\n\nrenderer.shadowMap.enabled = true;\n\nscene.background = new THREE.Color(135, 206, 235);\nrenderer.setSize(window.innerWidth, window.innerHeight);\n\nrenderer.xr.enabled = true;\n\n\nfunction onWindowResize() {\n    camera.aspect = window.innerWidth / window.innerHeight\n    camera.updateProjectionMatrix()\n    renderer.setSize(window.innerWidth, window.innerHeight)\n}\n\n\nwindow.init3d = (id) => new Promise((resolve, reject) => {\n\n    const galleryPreset = galleriesPresets.findById(id);\n\n    console.log(\"Gallery Preset\", galleryPreset);\n\n    gltfLoader.load(\n        galleryPreset.location,\n        async function (gltf) {\n\n            gallery = gltf.scene;\n            gallery.scale.set(galleryPreset.scene.scale, galleryPreset.scene.scale, galleryPreset.scene.scale);\n            gallery.position.set(\n                galleryPreset.scene.position.x,\n                galleryPreset.scene.position.y,\n                galleryPreset.scene.position.z);\n\n            camera.fov = (galleryPreset.camera.fov);\n            camera.updateProjectionMatrix();\n\n            camera.position.set(\n                galleryPreset.camera.position.x,\n                galleryPreset.camera.position.y,\n                galleryPreset.camera.position.z\n            );\n\n            if(typeof galleryPreset.postRenderModifier === 'function')\n                await galleryPreset.postRenderModifier(gallery);\n\n            scene.add(gallery);\n            scene.add(cameraGroup);\n\n            const rafCallbacks = new Set();\n\n            renderer.xr.addEventListener('sessionstart', function () {\n                //scene.position.z -= 2;\n                const { controller1, controller2, controllerGrip1, controllerGrip2, hand1, hand2 } = controllers.load(renderer, cameraGroup);\n                locomotion.load(scene, renderer, camera, cameraGroup, rafCallbacks, controller1, controller2)\n            });\n\n            window.addEventListener('resize', onWindowResize, false);\n            onWindowResize();\n\n            //const controls = new OrbitControls(camera, renderer.domElement);\n\n\n            renderer.setAnimationLoop(function (time ,frame) {\n                rafCallbacks.forEach(cb => cb(time, frame));\n                renderer.render( scene, camera );\n                //controls.update();\n            });\n\n            resolve();\n\n        },\n        () => {},\n        (error) => {\n            console.log(error);\n            reject();\n        });\n\n    document.body.appendChild(renderer.domElement);\n    document.body.appendChild(VRButton.createButton(renderer));\n\n\n});\n\nwindow.loadGallery = async () => {\n\n    if(!contractAddrReg.test(queryParams.g) && (queryParams.g !== 'example'))\n        return alert(\"Invalid Gallery Address!\");\n\n    web3 = new Web3(process.env.COINEX_NET_RPC_URL);\n\n    contract = new web3.eth.Contract(abi, queryParams.g === 'example' ? process.env.GALLERY_EXAMPLE_1 : queryParams.g);\n\n    loader.show();\n\n    const galleryIndex = parseInt(await contract.methods.getGalleryIndex().call());\n\n    const paintings = await contract.methods.getPaintings().call();\n\n    console.log(\"Paintings\", paintings);\n\n    await init3d(galleryIndex);\n\n    for(const painting in paintings) {\n        displayPainting(\n            gallery,\n            paintings[painting].posX,\n            paintings[painting].posY,\n            paintings[painting].posZ,\n            paintings[painting].rotX,\n            paintings[painting].rotY,\n            paintings[painting].rotZ,\n            paintings[painting].width,\n            paintings[painting].aspect,\n            paintings[painting].url\n        );\n    }\n\n    loader.hide();\n\n};\n\nloadGallery();","class VRButton {\n\n\tstatic createButton( renderer ) {\n\n\t\tconst button = document.createElement( 'button' );\n\n\t\tfunction showEnterVR( /*device*/ ) {\n\n\t\t\tlet currentSession = null;\n\n\t\t\tasync function onSessionStarted( session ) {\n\n\t\t\t\tsession.addEventListener( 'end', onSessionEnded );\n\n\t\t\t\tawait renderer.xr.setSession( session );\n\t\t\t\tbutton.textContent = 'EXIT VR';\n\n\t\t\t\tcurrentSession = session;\n\n\t\t\t}\n\n\t\t\tfunction onSessionEnded( /*event*/ ) {\n\n\t\t\t\tcurrentSession.removeEventListener( 'end', onSessionEnded );\n\n\t\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\t\tcurrentSession = null;\n\n\t\t\t}\n\n\t\t\t//\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'pointer';\n\t\t\tbutton.style.left = 'calc(50% - 50px)';\n\t\t\tbutton.style.width = '100px';\n\n\t\t\tbutton.textContent = 'ENTER VR';\n\n\t\t\tbutton.onmouseenter = function () {\n\n\t\t\t\tbutton.style.opacity = '1.0';\n\n\t\t\t};\n\n\t\t\tbutton.onmouseleave = function () {\n\n\t\t\t\tbutton.style.opacity = '0.5';\n\n\t\t\t};\n\n\t\t\tbutton.onclick = function () {\n\n\t\t\t\tif ( currentSession === null ) {\n\n\t\t\t\t\t// WebXR's requestReferenceSpace only works if the corresponding feature\n\t\t\t\t\t// was requested at session creation time. For simplicity, just ask for\n\t\t\t\t\t// the interesting ones as optional features, but be aware that the\n\t\t\t\t\t// requestReferenceSpace call will fail if it turns out to be unavailable.\n\t\t\t\t\t// ('local' is always available for immersive sessions and doesn't need to\n\t\t\t\t\t// be requested separately.)\n\n\t\t\t\t\tconst sessionInit = { optionalFeatures: [ 'local-floor', 'bounded-floor', 'hand-tracking', 'layers' ] };\n\t\t\t\t\tnavigator.xr.requestSession( 'immersive-vr', sessionInit ).then( onSessionStarted );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tcurrentSession.end();\n\n\t\t\t\t}\n\n\t\t\t};\n\n\t\t}\n\n\t\tfunction disableButton() {\n\n\t\t\tbutton.style.display = '';\n\n\t\t\tbutton.style.cursor = 'auto';\n\t\t\tbutton.style.left = 'calc(50% - 75px)';\n\t\t\tbutton.style.width = '150px';\n\n\t\t\tbutton.onmouseenter = null;\n\t\t\tbutton.onmouseleave = null;\n\n\t\t\tbutton.onclick = null;\n\n\t\t}\n\n\t\tfunction showWebXRNotFound() {\n\n\t\t\tdisableButton();\n\n\t\t\tbutton.textContent = 'VR NOT SUPPORTED';\n\n\t\t}\n\n\t\tfunction showVRNotAllowed( exception ) {\n\n\t\t\tdisableButton();\n\n\t\t\tconsole.warn( 'Exception when trying to call xr.isSessionSupported', exception );\n\n\t\t\tbutton.textContent = 'VR NOT ALLOWED';\n\n\t\t}\n\n\t\tfunction stylizeElement( element ) {\n\n\t\t\telement.style.position = 'absolute';\n\t\t\telement.style.bottom = '20px';\n\t\t\telement.style.padding = '12px 6px';\n\t\t\telement.style.border = '1px solid #fff';\n\t\t\telement.style.borderRadius = '4px';\n\t\t\telement.style.background = 'rgba(0,0,0,0.1)';\n\t\t\telement.style.color = '#fff';\n\t\t\telement.style.font = 'normal 13px sans-serif';\n\t\t\telement.style.textAlign = 'center';\n\t\t\telement.style.opacity = '0.5';\n\t\t\telement.style.outline = 'none';\n\t\t\telement.style.zIndex = '999';\n\n\t\t}\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\tbutton.id = 'VRButton';\n\t\t\tbutton.style.display = 'none';\n\n\t\t\tstylizeElement( button );\n\n\t\t\tnavigator.xr.isSessionSupported( 'immersive-vr' ).then( function ( supported ) {\n\n\t\t\t\tsupported ? showEnterVR() : showWebXRNotFound();\n\n\t\t\t\tif ( supported && VRButton.xrSessionIsGranted ) {\n\n\t\t\t\t\tbutton.click();\n\n\t\t\t\t}\n\n\t\t\t} ).catch( showVRNotAllowed );\n\n\t\t\treturn button;\n\n\t\t} else {\n\n\t\t\tconst message = document.createElement( 'a' );\n\n\t\t\tif ( window.isSecureContext === false ) {\n\n\t\t\t\tmessage.href = document.location.href.replace( /^http:/, 'https:' );\n\t\t\t\tmessage.innerHTML = 'WEBXR NEEDS HTTPS'; // TODO Improve message\n\n\t\t\t} else {\n\n\t\t\t\tmessage.href = 'https://immersiveweb.dev/';\n\t\t\t\tmessage.innerHTML = 'WEBXR NOT AVAILABLE';\n\n\t\t\t}\n\n\t\t\tmessage.style.left = 'calc(50% - 90px)';\n\t\t\tmessage.style.width = '180px';\n\t\t\tmessage.style.textDecoration = 'none';\n\n\t\t\tstylizeElement( message );\n\n\t\t\treturn message;\n\n\t\t}\n\n\t}\n\n\tstatic xrSessionIsGranted = false;\n\n\tstatic registerSessionGrantedListener() {\n\n\t\tif ( 'xr' in navigator ) {\n\n\t\t\t// WebXRViewer (based on Firefox) has a bug where addEventListener\n\t\t\t// throws a silent exception and aborts execution entirely.\n\t\t\tif ( /WebXRViewer\\//i.test( navigator.userAgent ) ) return;\n\n\t\t\tnavigator.xr.addEventListener( 'sessiongranted', () => {\n\n\t\t\t\tVRButton.xrSessionIsGranted = true;\n\n\t\t\t} );\n\n\t\t}\n\n\t}\n\n}\n\nVRButton.registerSessionGrantedListener();\n\nexport { VRButton };\n","import {\n\tMesh,\n\tMeshBasicMaterial,\n\tObject3D,\n\tSphereGeometry,\n} from 'three';\n\nimport { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nimport {\n\tConstants as MotionControllerConstants,\n\tfetchProfile,\n\tMotionController\n} from '../libs/motion-controllers.module.js';\n\nconst DEFAULT_PROFILES_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles';\nconst DEFAULT_PROFILE = 'generic-trigger';\n\nclass XRControllerModel extends Object3D {\n\n\tconstructor() {\n\n\t\tsuper();\n\n\t\tthis.motionController = null;\n\t\tthis.envMap = null;\n\n\t}\n\n\tsetEnvironmentMap( envMap ) {\n\n\t\tif ( this.envMap == envMap ) {\n\n\t\t\treturn this;\n\n\t\t}\n\n\t\tthis.envMap = envMap;\n\t\tthis.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = this.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t\treturn this;\n\n\t}\n\n\t/**\n\t * Polls data from the XRInputSource and updates the model's components to match\n\t * the real world data\n\t */\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( ! this.motionController ) return;\n\n\t\t// Cause the MotionController to poll the Gamepad for data\n\t\tthis.motionController.updateFromGamepad();\n\n\t\t// Update the 3D model to reflect the button, thumbstick, and touchpad state\n\t\tObject.values( this.motionController.components ).forEach( ( component ) => {\n\n\t\t\t// Update node data based on the visual responses' current states\n\t\t\tObject.values( component.visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\t\tconst { valueNode, minNode, maxNode, value, valueNodeProperty } = visualResponse;\n\n\t\t\t\t// Skip if the visual response node is not found. No error is needed,\n\t\t\t\t// because it will have been reported at load time.\n\t\t\t\tif ( ! valueNode ) return;\n\n\t\t\t\t// Calculate the new properties based on the weight supplied\n\t\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.VISIBILITY ) {\n\n\t\t\t\t\tvalueNode.visible = value;\n\n\t\t\t\t} else if ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\t\tvalueNode.quaternion.slerpQuaternions(\n\t\t\t\t\t\tminNode.quaternion,\n\t\t\t\t\t\tmaxNode.quaternion,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t\tvalueNode.position.lerpVectors(\n\t\t\t\t\t\tminNode.position,\n\t\t\t\t\t\tmaxNode.position,\n\t\t\t\t\t\tvalue\n\t\t\t\t\t);\n\n\t\t\t\t}\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n}\n\n/**\n * Walks the model's tree to find the nodes needed to animate the components and\n * saves them to the motionContoller components for use in the frame loop. When\n * touchpads are found, attaches a touch dot to them.\n */\nfunction findNodes( motionController, scene ) {\n\n\t// Loop through the components and find the nodes needed for each components' visual responses\n\tObject.values( motionController.components ).forEach( ( component ) => {\n\n\t\tconst { type, touchPointNodeName, visualResponses } = component;\n\n\t\tif ( type === MotionControllerConstants.ComponentType.TOUCHPAD ) {\n\n\t\t\tcomponent.touchPointNode = scene.getObjectByName( touchPointNodeName );\n\t\t\tif ( component.touchPointNode ) {\n\n\t\t\t\t// Attach a touch dot to the touchpad.\n\t\t\t\tconst sphereGeometry = new SphereGeometry( 0.001 );\n\t\t\t\tconst material = new MeshBasicMaterial( { color: 0x0000FF } );\n\t\t\t\tconst sphere = new Mesh( sphereGeometry, material );\n\t\t\t\tcomponent.touchPointNode.add( sphere );\n\n\t\t\t} else {\n\n\t\t\t\tconsole.warn( `Could not find touch dot, ${component.touchPointNodeName}, in touchpad component ${component.id}` );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Loop through all the visual responses to be applied to this component\n\t\tObject.values( visualResponses ).forEach( ( visualResponse ) => {\n\n\t\t\tconst { valueNodeName, minNodeName, maxNodeName, valueNodeProperty } = visualResponse;\n\n\t\t\t// If animating a transform, find the two nodes to be interpolated between.\n\t\t\tif ( valueNodeProperty === MotionControllerConstants.VisualResponseProperty.TRANSFORM ) {\n\n\t\t\t\tvisualResponse.minNode = scene.getObjectByName( minNodeName );\n\t\t\t\tvisualResponse.maxNode = scene.getObjectByName( maxNodeName );\n\n\t\t\t\t// If the extents cannot be found, skip this animation\n\t\t\t\tif ( ! visualResponse.minNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${minNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t\tif ( ! visualResponse.maxNode ) {\n\n\t\t\t\t\tconsole.warn( `Could not find ${maxNodeName} in the model` );\n\t\t\t\t\treturn;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// If the target node cannot be found, skip this animation\n\t\t\tvisualResponse.valueNode = scene.getObjectByName( valueNodeName );\n\t\t\tif ( ! visualResponse.valueNode ) {\n\n\t\t\t\tconsole.warn( `Could not find ${valueNodeName} in the model` );\n\n\t\t\t}\n\n\t\t} );\n\n\t} );\n\n}\n\nfunction addAssetSceneToControllerModel( controllerModel, scene ) {\n\n\t// Find the nodes needed for animation and cache them on the motionController.\n\tfindNodes( controllerModel.motionController, scene );\n\n\t// Apply any environment map that the mesh already has set.\n\tif ( controllerModel.envMap ) {\n\n\t\tscene.traverse( ( child ) => {\n\n\t\t\tif ( child.isMesh ) {\n\n\t\t\t\tchild.material.envMap = controllerModel.envMap;\n\t\t\t\tchild.material.needsUpdate = true;\n\n\t\t\t}\n\n\t\t} );\n\n\t}\n\n\t// Add the glTF scene to the controllerModel.\n\tcontrollerModel.add( scene );\n\n}\n\nclass XRControllerModelFactory {\n\n\tconstructor( gltfLoader = null ) {\n\n\t\tthis.gltfLoader = gltfLoader;\n\t\tthis.path = DEFAULT_PROFILES_PATH;\n\t\tthis._assetCache = {};\n\n\t\t// If a GLTFLoader wasn't supplied to the constructor create a new one.\n\t\tif ( ! this.gltfLoader ) {\n\n\t\t\tthis.gltfLoader = new GLTFLoader();\n\n\t\t}\n\n\t}\n\n\tcreateControllerModel( controller ) {\n\n\t\tconst controllerModel = new XRControllerModel();\n\t\tlet scene = null;\n\n\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\tconst xrInputSource = event.data;\n\n\t\t\tif ( xrInputSource.targetRayMode !== 'tracked-pointer' || ! xrInputSource.gamepad ) return;\n\n\t\t\tfetchProfile( xrInputSource, this.path, DEFAULT_PROFILE ).then( ( { profile, assetPath } ) => {\n\n\t\t\t\tcontrollerModel.motionController = new MotionController(\n\t\t\t\t\txrInputSource,\n\t\t\t\t\tprofile,\n\t\t\t\t\tassetPath\n\t\t\t\t);\n\n\t\t\t\tconst cachedAsset = this._assetCache[ controllerModel.motionController.assetUrl ];\n\t\t\t\tif ( cachedAsset ) {\n\n\t\t\t\t\tscene = cachedAsset.scene.clone();\n\n\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tif ( ! this.gltfLoader ) {\n\n\t\t\t\t\t\tthrow new Error( 'GLTFLoader not set.' );\n\n\t\t\t\t\t}\n\n\t\t\t\t\tthis.gltfLoader.setPath( '' );\n\t\t\t\t\tthis.gltfLoader.load( controllerModel.motionController.assetUrl, ( asset ) => {\n\n\t\t\t\t\t\tthis._assetCache[ controllerModel.motionController.assetUrl ] = asset;\n\n\t\t\t\t\t\tscene = asset.scene.clone();\n\n\t\t\t\t\t\taddAssetSceneToControllerModel( controllerModel, scene );\n\n\t\t\t\t\t},\n\t\t\t\t\tnull,\n\t\t\t\t\t() => {\n\n\t\t\t\t\t\tthrow new Error( `Asset ${controllerModel.motionController.assetUrl} missing or malformed.` );\n\n\t\t\t\t\t} );\n\n\t\t\t\t}\n\n\t\t\t} ).catch( ( err ) => {\n\n\t\t\t\tconsole.warn( err );\n\n\t\t\t} );\n\n\t\t} );\n\n\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\tcontrollerModel.motionController = null;\n\t\t\tcontrollerModel.remove( scene );\n\t\t\tscene = null;\n\n\t\t} );\n\n\t\treturn controllerModel;\n\n\t}\n\n}\n\nexport { XRControllerModelFactory };\n","/**\n * @webxr-input-profiles/motion-controllers 1.0.0 https://github.com/immersive-web/webxr-input-profiles\n */\n\nconst Constants = {\n  Handedness: Object.freeze({\n    NONE: 'none',\n    LEFT: 'left',\n    RIGHT: 'right'\n  }),\n\n  ComponentState: Object.freeze({\n    DEFAULT: 'default',\n    TOUCHED: 'touched',\n    PRESSED: 'pressed'\n  }),\n\n  ComponentProperty: Object.freeze({\n    BUTTON: 'button',\n    X_AXIS: 'xAxis',\n    Y_AXIS: 'yAxis',\n    STATE: 'state'\n  }),\n\n  ComponentType: Object.freeze({\n    TRIGGER: 'trigger',\n    SQUEEZE: 'squeeze',\n    TOUCHPAD: 'touchpad',\n    THUMBSTICK: 'thumbstick',\n    BUTTON: 'button'\n  }),\n\n  ButtonTouchThreshold: 0.05,\n\n  AxisTouchThreshold: 0.1,\n\n  VisualResponseProperty: Object.freeze({\n    TRANSFORM: 'transform',\n    VISIBILITY: 'visibility'\n  })\n};\n\n/**\n * @description Static helper function to fetch a JSON file and turn it into a JS object\n * @param {string} path - Path to JSON file to be fetched\n */\nasync function fetchJsonFile(path) {\n  const response = await fetch(path);\n  if (!response.ok) {\n    throw new Error(response.statusText);\n  } else {\n    return response.json();\n  }\n}\n\nasync function fetchProfilesList(basePath) {\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  const profileListFileName = 'profilesList.json';\n  const profilesList = await fetchJsonFile(`${basePath}/${profileListFileName}`);\n  return profilesList;\n}\n\nasync function fetchProfile(xrInputSource, basePath, defaultProfile = null, getAssetPath = true) {\n  if (!xrInputSource) {\n    throw new Error('No xrInputSource supplied');\n  }\n\n  if (!basePath) {\n    throw new Error('No basePath supplied');\n  }\n\n  // Get the list of profiles\n  const supportedProfilesList = await fetchProfilesList(basePath);\n\n  // Find the relative path to the first requested profile that is recognized\n  let match;\n  xrInputSource.profiles.some((profileId) => {\n    const supportedProfile = supportedProfilesList[profileId];\n    if (supportedProfile) {\n      match = {\n        profileId,\n        profilePath: `${basePath}/${supportedProfile.path}`,\n        deprecated: !!supportedProfile.deprecated\n      };\n    }\n    return !!match;\n  });\n\n  if (!match) {\n    if (!defaultProfile) {\n      throw new Error('No matching profile name found');\n    }\n\n    const supportedProfile = supportedProfilesList[defaultProfile];\n    if (!supportedProfile) {\n      throw new Error(`No matching profile name found and default profile \"${defaultProfile}\" missing.`);\n    }\n\n    match = {\n      profileId: defaultProfile,\n      profilePath: `${basePath}/${supportedProfile.path}`,\n      deprecated: !!supportedProfile.deprecated\n    };\n  }\n\n  const profile = await fetchJsonFile(match.profilePath);\n\n  let assetPath;\n  if (getAssetPath) {\n    let layout;\n    if (xrInputSource.handedness === 'any') {\n      layout = profile.layouts[Object.keys(profile.layouts)[0]];\n    } else {\n      layout = profile.layouts[xrInputSource.handedness];\n    }\n    if (!layout) {\n      throw new Error(\n        `No matching handedness, ${xrInputSource.handedness}, in profile ${match.profileId}`\n      );\n    }\n\n    if (layout.assetPath) {\n      assetPath = match.profilePath.replace('profile.json', layout.assetPath);\n    }\n  }\n\n  return { profile, assetPath };\n}\n\n/** @constant {Object} */\nconst defaultComponentValues = {\n  xAxis: 0,\n  yAxis: 0,\n  button: 0,\n  state: Constants.ComponentState.DEFAULT\n};\n\n/**\n * @description Converts an X, Y coordinate from the range -1 to 1 (as reported by the Gamepad\n * API) to the range 0 to 1 (for interpolation). Also caps the X, Y values to be bounded within\n * a circle. This ensures that thumbsticks are not animated outside the bounds of their physical\n * range of motion and touchpads do not report touch locations off their physical bounds.\n * @param {number} x The original x coordinate in the range -1 to 1\n * @param {number} y The original y coordinate in the range -1 to 1\n */\nfunction normalizeAxes(x = 0, y = 0) {\n  let xAxis = x;\n  let yAxis = y;\n\n  // Determine if the point is outside the bounds of the circle\n  // and, if so, place it on the edge of the circle\n  const hypotenuse = Math.sqrt((x * x) + (y * y));\n  if (hypotenuse > 1) {\n    const theta = Math.atan2(y, x);\n    xAxis = Math.cos(theta);\n    yAxis = Math.sin(theta);\n  }\n\n  // Scale and move the circle so values are in the interpolation range.  The circle's origin moves\n  // from (0, 0) to (0.5, 0.5). The circle's radius scales from 1 to be 0.5.\n  const result = {\n    normalizedXAxis: (xAxis * 0.5) + 0.5,\n    normalizedYAxis: (yAxis * 0.5) + 0.5\n  };\n  return result;\n}\n\n/**\n * Contains the description of how the 3D model should visually respond to a specific user input.\n * This is accomplished by initializing the object with the name of a node in the 3D model and\n * property that need to be modified in response to user input, the name of the nodes representing\n * the allowable range of motion, and the name of the input which triggers the change. In response\n * to the named input changing, this object computes the appropriate weighting to use for\n * interpolating between the range of motion nodes.\n */\nclass VisualResponse {\n  constructor(visualResponseDescription) {\n    this.componentProperty = visualResponseDescription.componentProperty;\n    this.states = visualResponseDescription.states;\n    this.valueNodeName = visualResponseDescription.valueNodeName;\n    this.valueNodeProperty = visualResponseDescription.valueNodeProperty;\n\n    if (this.valueNodeProperty === Constants.VisualResponseProperty.TRANSFORM) {\n      this.minNodeName = visualResponseDescription.minNodeName;\n      this.maxNodeName = visualResponseDescription.maxNodeName;\n    }\n\n    // Initializes the response's current value based on default data\n    this.value = 0;\n    this.updateFromComponent(defaultComponentValues);\n  }\n\n  /**\n   * Computes the visual response's interpolation weight based on component state\n   * @param {Object} componentValues - The component from which to update\n   * @param {number} xAxis - The reported X axis value of the component\n   * @param {number} yAxis - The reported Y axis value of the component\n   * @param {number} button - The reported value of the component's button\n   * @param {string} state - The component's active state\n   */\n  updateFromComponent({\n    xAxis, yAxis, button, state\n  }) {\n    const { normalizedXAxis, normalizedYAxis } = normalizeAxes(xAxis, yAxis);\n    switch (this.componentProperty) {\n      case Constants.ComponentProperty.X_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedXAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.Y_AXIS:\n        this.value = (this.states.includes(state)) ? normalizedYAxis : 0.5;\n        break;\n      case Constants.ComponentProperty.BUTTON:\n        this.value = (this.states.includes(state)) ? button : 0;\n        break;\n      case Constants.ComponentProperty.STATE:\n        if (this.valueNodeProperty === Constants.VisualResponseProperty.VISIBILITY) {\n          this.value = (this.states.includes(state));\n        } else {\n          this.value = this.states.includes(state) ? 1.0 : 0.0;\n        }\n        break;\n      default:\n        throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`);\n    }\n  }\n}\n\nclass Component {\n  /**\n   * @param {Object} componentId - Id of the component\n   * @param {Object} componentDescription - Description of the component to be created\n   */\n  constructor(componentId, componentDescription) {\n    if (!componentId\n     || !componentDescription\n     || !componentDescription.visualResponses\n     || !componentDescription.gamepadIndices\n     || Object.keys(componentDescription.gamepadIndices).length === 0) {\n      throw new Error('Invalid arguments supplied');\n    }\n\n    this.id = componentId;\n    this.type = componentDescription.type;\n    this.rootNodeName = componentDescription.rootNodeName;\n    this.touchPointNodeName = componentDescription.touchPointNodeName;\n\n    // Build all the visual responses for this component\n    this.visualResponses = {};\n    Object.keys(componentDescription.visualResponses).forEach((responseName) => {\n      const visualResponse = new VisualResponse(componentDescription.visualResponses[responseName]);\n      this.visualResponses[responseName] = visualResponse;\n    });\n\n    // Set default values\n    this.gamepadIndices = Object.assign({}, componentDescription.gamepadIndices);\n\n    this.values = {\n      state: Constants.ComponentState.DEFAULT,\n      button: (this.gamepadIndices.button !== undefined) ? 0 : undefined,\n      xAxis: (this.gamepadIndices.xAxis !== undefined) ? 0 : undefined,\n      yAxis: (this.gamepadIndices.yAxis !== undefined) ? 0 : undefined\n    };\n  }\n\n  get data() {\n    const data = { id: this.id, ...this.values };\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   * @param {Object} gamepad - The gamepad object from which the component data should be polled\n   */\n  updateFromGamepad(gamepad) {\n    // Set the state to default before processing other data sources\n    this.values.state = Constants.ComponentState.DEFAULT;\n\n    // Get and normalize button\n    if (this.gamepadIndices.button !== undefined\n        && gamepad.buttons.length > this.gamepadIndices.button) {\n      const gamepadButton = gamepad.buttons[this.gamepadIndices.button];\n      this.values.button = gamepadButton.value;\n      this.values.button = (this.values.button < 0) ? 0 : this.values.button;\n      this.values.button = (this.values.button > 1) ? 1 : this.values.button;\n\n      // Set the state based on the button\n      if (gamepadButton.pressed || this.values.button === 1) {\n        this.values.state = Constants.ComponentState.PRESSED;\n      } else if (gamepadButton.touched || this.values.button > Constants.ButtonTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize x axis value\n    if (this.gamepadIndices.xAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.xAxis) {\n      this.values.xAxis = gamepad.axes[this.gamepadIndices.xAxis];\n      this.values.xAxis = (this.values.xAxis < -1) ? -1 : this.values.xAxis;\n      this.values.xAxis = (this.values.xAxis > 1) ? 1 : this.values.xAxis;\n\n      // If the state is still default, check if the xAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.xAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Get and normalize Y axis value\n    if (this.gamepadIndices.yAxis !== undefined\n        && gamepad.axes.length > this.gamepadIndices.yAxis) {\n      this.values.yAxis = gamepad.axes[this.gamepadIndices.yAxis];\n      this.values.yAxis = (this.values.yAxis < -1) ? -1 : this.values.yAxis;\n      this.values.yAxis = (this.values.yAxis > 1) ? 1 : this.values.yAxis;\n\n      // If the state is still default, check if the yAxis makes it touched\n      if (this.values.state === Constants.ComponentState.DEFAULT\n        && Math.abs(this.values.yAxis) > Constants.AxisTouchThreshold) {\n        this.values.state = Constants.ComponentState.TOUCHED;\n      }\n    }\n\n    // Update the visual response weights based on the current component data\n    Object.values(this.visualResponses).forEach((visualResponse) => {\n      visualResponse.updateFromComponent(this.values);\n    });\n  }\n}\n\n/**\n  * @description Builds a motion controller with components and visual responses based on the\n  * supplied profile description. Data is polled from the xrInputSource's gamepad.\n  * @author Nell Waliczek / https://github.com/NellWaliczek\n*/\nclass MotionController {\n  /**\n   * @param {Object} xrInputSource - The XRInputSource to build the MotionController around\n   * @param {Object} profile - The best matched profile description for the supplied xrInputSource\n   * @param {Object} assetUrl\n   */\n  constructor(xrInputSource, profile, assetUrl) {\n    if (!xrInputSource) {\n      throw new Error('No xrInputSource supplied');\n    }\n\n    if (!profile) {\n      throw new Error('No profile supplied');\n    }\n\n    this.xrInputSource = xrInputSource;\n    this.assetUrl = assetUrl;\n    this.id = profile.profileId;\n\n    // Build child components as described in the profile description\n    this.layoutDescription = profile.layouts[xrInputSource.handedness];\n    this.components = {};\n    Object.keys(this.layoutDescription.components).forEach((componentId) => {\n      const componentDescription = this.layoutDescription.components[componentId];\n      this.components[componentId] = new Component(componentId, componentDescription);\n    });\n\n    // Initialize components based on current gamepad state\n    this.updateFromGamepad();\n  }\n\n  get gripSpace() {\n    return this.xrInputSource.gripSpace;\n  }\n\n  get targetRaySpace() {\n    return this.xrInputSource.targetRaySpace;\n  }\n\n  /**\n   * @description Returns a subset of component data for simplified debugging\n   */\n  get data() {\n    const data = [];\n    Object.values(this.components).forEach((component) => {\n      data.push(component.data);\n    });\n    return data;\n  }\n\n  /**\n   * @description Poll for updated data based on current gamepad state\n   */\n  updateFromGamepad() {\n    Object.values(this.components).forEach((component) => {\n      component.updateFromGamepad(this.xrInputSource.gamepad);\n    });\n  }\n}\n\nexport { Constants, MotionController, fetchProfile, fetchProfilesList };\n","import {\n\tObject3D\n} from 'three';\n\nimport {\n\tXRHandPrimitiveModel\n} from './XRHandPrimitiveModel.js';\n\nimport {\n\tXRHandMeshModel\n} from './XRHandMeshModel.js';\n\nclass XRHandModel extends Object3D {\n\n\tconstructor( controller ) {\n\n\t\tsuper();\n\n\t\tthis.controller = controller;\n\t\tthis.motionController = null;\n\t\tthis.envMap = null;\n\n\t\tthis.mesh = null;\n\n\t}\n\n\tupdateMatrixWorld( force ) {\n\n\t\tsuper.updateMatrixWorld( force );\n\n\t\tif ( this.motionController ) {\n\n\t\t\tthis.motionController.updateMesh();\n\n\t\t}\n\n\t}\n\n}\n\nclass XRHandModelFactory {\n\n\tconstructor() {\n\n\t\tthis.path = null;\n\n\t}\n\n\tsetPath( path ) {\n\n\t\tthis.path = path;\n\n\t\treturn this;\n\n\t}\n\n\tcreateHandModel( controller, profile ) {\n\n\t\tconst handModel = new XRHandModel( controller );\n\n\t\tcontroller.addEventListener( 'connected', ( event ) => {\n\n\t\t\tconst xrInputSource = event.data;\n\n\t\t\tif ( xrInputSource.hand && ! handModel.motionController ) {\n\n\t\t\t\thandModel.xrInputSource = xrInputSource;\n\n\t\t\t\t// @todo Detect profile if not provided\n\t\t\t\tif ( profile === undefined || profile === 'spheres' ) {\n\n\t\t\t\t\thandModel.motionController = new XRHandPrimitiveModel( handModel, controller, this.path, xrInputSource.handedness, { primitive: 'sphere' } );\n\n\t\t\t\t} else if ( profile === 'boxes' ) {\n\n\t\t\t\t\thandModel.motionController = new XRHandPrimitiveModel( handModel, controller, this.path, xrInputSource.handedness, { primitive: 'box' } );\n\n\t\t\t\t} else if ( profile === 'mesh' ) {\n\n\t\t\t\t\thandModel.motionController = new XRHandMeshModel( handModel, controller, this.path, xrInputSource.handedness );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tcontroller.visible = true;\n\n\t\t} );\n\n\t\tcontroller.addEventListener( 'disconnected', () => {\n\n\t\t\tcontroller.visible = false;\n\t\t\t// handModel.motionController = null;\n\t\t\t// handModel.remove( scene );\n\t\t\t// scene = null;\n\n\t\t} );\n\n\t\treturn handModel;\n\n\t}\n\n}\n\nexport { XRHandModelFactory };\n","import {\n\tDynamicDrawUsage,\n\tSphereGeometry,\n\tBoxGeometry,\n\tMeshStandardMaterial,\n\tInstancedMesh,\n\tMatrix4,\n\tVector3\n} from 'three';\n\nconst _matrix = new Matrix4();\nconst _vector = new Vector3();\n\nclass XRHandPrimitiveModel {\n\n\tconstructor( handModel, controller, path, handedness, options ) {\n\n\t\tthis.controller = controller;\n\t\tthis.handModel = handModel;\n\t\tthis.envMap = null;\n\n\t\tlet geometry;\n\n\t\tif ( ! options || ! options.primitive || options.primitive === 'sphere' ) {\n\n\t\t\tgeometry = new SphereGeometry( 1, 10, 10 );\n\n\t\t} else if ( options.primitive === 'box' ) {\n\n\t\t\tgeometry = new BoxGeometry( 1, 1, 1 );\n\n\t\t}\n\n\t\tconst material = new MeshStandardMaterial();\n\n\t\tthis.handMesh = new InstancedMesh( geometry, material, 30 );\n\t\tthis.handMesh.instanceMatrix.setUsage( DynamicDrawUsage ); // will be updated every frame\n\t\tthis.handMesh.castShadow = true;\n\t\tthis.handMesh.receiveShadow = true;\n\t\tthis.handModel.add( this.handMesh );\n\n\t\tthis.joints = [\n\t\t\t'wrist',\n\t\t\t'thumb-metacarpal',\n\t\t\t'thumb-phalanx-proximal',\n\t\t\t'thumb-phalanx-distal',\n\t\t\t'thumb-tip',\n\t\t\t'index-finger-metacarpal',\n\t\t\t'index-finger-phalanx-proximal',\n\t\t\t'index-finger-phalanx-intermediate',\n\t\t\t'index-finger-phalanx-distal',\n\t\t\t'index-finger-tip',\n\t\t\t'middle-finger-metacarpal',\n\t\t\t'middle-finger-phalanx-proximal',\n\t\t\t'middle-finger-phalanx-intermediate',\n\t\t\t'middle-finger-phalanx-distal',\n\t\t\t'middle-finger-tip',\n\t\t\t'ring-finger-metacarpal',\n\t\t\t'ring-finger-phalanx-proximal',\n\t\t\t'ring-finger-phalanx-intermediate',\n\t\t\t'ring-finger-phalanx-distal',\n\t\t\t'ring-finger-tip',\n\t\t\t'pinky-finger-metacarpal',\n\t\t\t'pinky-finger-phalanx-proximal',\n\t\t\t'pinky-finger-phalanx-intermediate',\n\t\t\t'pinky-finger-phalanx-distal',\n\t\t\t'pinky-finger-tip'\n\t\t];\n\n\t}\n\n\tupdateMesh() {\n\n\t\tconst defaultRadius = 0.008;\n\t\tconst joints = this.controller.joints;\n\n\t\tlet count = 0;\n\n\t\tfor ( let i = 0; i < this.joints.length; i ++ ) {\n\n\t\t\tconst joint = joints[ this.joints[ i ] ];\n\n\t\t\tif ( joint.visible ) {\n\n\t\t\t\t_vector.setScalar( joint.jointRadius || defaultRadius );\n\t\t\t\t_matrix.compose( joint.position, joint.quaternion, _vector );\n\t\t\t\tthis.handMesh.setMatrixAt( i, _matrix );\n\n\t\t\t\tcount ++;\n\n\t\t\t}\n\n\t\t}\n\n\t\tthis.handMesh.count = count;\n\t\tthis.handMesh.instanceMatrix.needsUpdate = true;\n\n\t}\n\n}\n\nexport { XRHandPrimitiveModel };\n","import { GLTFLoader } from '../loaders/GLTFLoader.js';\n\nconst DEFAULT_HAND_PROFILE_PATH = 'https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/';\n\nclass XRHandMeshModel {\n\n\tconstructor( handModel, controller, path, handedness ) {\n\n\t\tthis.controller = controller;\n\t\tthis.handModel = handModel;\n\n\t\tthis.bones = [];\n\n\t\tconst loader = new GLTFLoader();\n\t\tloader.setPath( path || DEFAULT_HAND_PROFILE_PATH );\n\t\tloader.load( `${handedness}.glb`, gltf => {\n\n\t\t\tconst object = gltf.scene.children[ 0 ];\n\t\t\tthis.handModel.add( object );\n\n\t\t\tconst mesh = object.getObjectByProperty( 'type', 'SkinnedMesh' );\n\t\t\tmesh.frustumCulled = false;\n\t\t\tmesh.castShadow = true;\n\t\t\tmesh.receiveShadow = true;\n\n\t\t\tconst joints = [\n\t\t\t\t'wrist',\n\t\t\t\t'thumb-metacarpal',\n\t\t\t\t'thumb-phalanx-proximal',\n\t\t\t\t'thumb-phalanx-distal',\n\t\t\t\t'thumb-tip',\n\t\t\t\t'index-finger-metacarpal',\n\t\t\t\t'index-finger-phalanx-proximal',\n\t\t\t\t'index-finger-phalanx-intermediate',\n\t\t\t\t'index-finger-phalanx-distal',\n\t\t\t\t'index-finger-tip',\n\t\t\t\t'middle-finger-metacarpal',\n\t\t\t\t'middle-finger-phalanx-proximal',\n\t\t\t\t'middle-finger-phalanx-intermediate',\n\t\t\t\t'middle-finger-phalanx-distal',\n\t\t\t\t'middle-finger-tip',\n\t\t\t\t'ring-finger-metacarpal',\n\t\t\t\t'ring-finger-phalanx-proximal',\n\t\t\t\t'ring-finger-phalanx-intermediate',\n\t\t\t\t'ring-finger-phalanx-distal',\n\t\t\t\t'ring-finger-tip',\n\t\t\t\t'pinky-finger-metacarpal',\n\t\t\t\t'pinky-finger-phalanx-proximal',\n\t\t\t\t'pinky-finger-phalanx-intermediate',\n\t\t\t\t'pinky-finger-phalanx-distal',\n\t\t\t\t'pinky-finger-tip',\n\t\t\t];\n\n\t\t\tjoints.forEach( jointName => {\n\n\t\t\t\tconst bone = object.getObjectByName( jointName );\n\n\t\t\t\tif ( bone !== undefined ) {\n\n\t\t\t\t\tbone.jointName = jointName;\n\n\t\t\t\t} else {\n\n\t\t\t\t\tconsole.warn( `Couldn't find ${jointName} in ${handedness} hand mesh` );\n\n\t\t\t\t}\n\n\t\t\t\tthis.bones.push( bone );\n\n\t\t\t} );\n\n\t\t} );\n\n\t}\n\n\tupdateMesh() {\n\n\t\t// XR Joints\n\t\tconst XRJoints = this.controller.joints;\n\n\t\tfor ( let i = 0; i < this.bones.length; i ++ ) {\n\n\t\t\tconst bone = this.bones[ i ];\n\n\t\t\tif ( bone ) {\n\n\t\t\t\tconst XRJoint = XRJoints[ bone.jointName ];\n\n\t\t\t\tif ( XRJoint.visible ) {\n\n\t\t\t\t\tconst position = XRJoint.position;\n\n\t\t\t\t\tbone.position.copy( position );\n\t\t\t\t\tbone.quaternion.copy( XRJoint.quaternion );\n\t\t\t\t\t// bone.scale.setScalar( XRJoint.jointRadius || defaultRadius );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n}\n\nexport { XRHandMeshModel };\n","import { XRControllerModelFactory } from 'three/examples/jsm/webxr/XRControllerModelFactory.js';\nimport { XRHandModelFactory } from 'three/examples/jsm/webxr/XRHandModelFactory.js';\n\nconst controllerModelFactory = new XRControllerModelFactory();\nconst handModelFactory = new XRHandModelFactory();\n\nmodule.exports.load = (renderer, cameraGroup) => {\n\n    const controllers = [0,1].map(function (index) {\n        const controller = renderer.xr.getController(index);\n        cameraGroup.add(controller);\n\n        const controllerGrip = renderer.xr.getControllerGrip(index);\n        const model = controllerModelFactory.createControllerModel( controllerGrip );\n        controllerGrip.add( model );\n        cameraGroup.add( controllerGrip );\n\n        const hand = renderer.xr.getHand( index );\n        hand.add( handModelFactory.createHandModel( hand, \"mesh\" ) );\n        cameraGroup.add( hand );\n\n        return {\n            hand, grip: controllerGrip, controller\n        }\n    });\n\n    const controller1 = controllers[0].controller;\n    const controller2 = controllers[1].controller;\n    const hand1 = controllers[0].hand;\n    const hand2 = controllers[1].hand;\n    const controllerGrip1 = controllers[0].grip;\n    const controllerGrip2 = controllers[1].grip;\n\n    return {\n        controller1,\n        controller2,\n        controllerGrip1,\n        controllerGrip2,\n        hand1,\n        hand2\n    };\n\n};\n","import {\n    Mesh,\n    MeshBasicMaterial,\n    Vector3,\n    PointLight,\n    PlaneGeometry,\n    TextureLoader,\n    BufferGeometry,\n    BufferAttribute,\n    LineBasicMaterial,\n    AdditiveBlending,\n    Line\n} from  'three';\n\nmodule.exports.load = (scene, renderer, camera, cameraGroup, rafCallbacks, controller1, controller2) => {\n\n    const locomotion = require('./fade')(camera, cameraGroup);\n\n// Utility Vectors\n    const g = new Vector3(0,-9.8,0);\n    const tempVec = new Vector3();\n    const tempVec1 = new Vector3();\n    const tempVecP = new Vector3();\n    const tempVecV = new Vector3();\n\n// Guideline parabola function\n    function positionAtT(inVec,t,p,v,g) {\n        inVec.copy(p);\n        inVec.addScaledVector(v,t);\n        inVec.addScaledVector(g,0.5*t**2);\n        return inVec;\n    }\n\n// The guideline\n    const lineSegments=10;\n    const lineGeometry = new BufferGeometry();\n    const lineGeometryVertices = new Float32Array((lineSegments +1) * 3);\n    lineGeometryVertices.fill(0);\n    const lineGeometryColors = new Float32Array((lineSegments +1) * 3);\n    lineGeometryColors.fill(0.5);\n    lineGeometry.setAttribute('position', new BufferAttribute(lineGeometryVertices, 3));\n    lineGeometry.setAttribute('color', new BufferAttribute(lineGeometryColors, 3));\n    const lineMaterial = new LineBasicMaterial({ vertexColors: true, blending: AdditiveBlending });\n    const guideline = new Line( lineGeometry, lineMaterial );\n\n// The light at the end of the line\n    const guideLight = new PointLight(0xffeeaa, 0, 2);\n\n// The target on the ground\n    const guideSpriteTexture = new TextureLoader().load('/assets/img/target.png');\n    const guideSprite = new Mesh(\n        new PlaneGeometry(0.3, 0.3, 1, 1),\n        new MeshBasicMaterial({\n            map: guideSpriteTexture,\n            blending: AdditiveBlending,\n            color: 0x555555,\n            transparent: true\n        })\n    );\n    guideSprite.rotation.x = -Math.PI/2;\n\n    let guidingController = null;\n    function onSelectStart(e) {\n\n        // This is e.data is an XRInputSource and if\n        // it has a hand and being handled by hand tracking so do nothing\n        if (e && e.data && e.data.hand) {\n            return;\n        }\n\n        const controller = this;\n\n        console.log(\"startGuide\", controller);\n\n        guidingController = controller;\n        guideLight.intensity = 1;\n        controller.add(guideline);\n        scene.add(guideSprite);\n    }\n\n    function onPointStart() {\n\n        const controller = this;\n\n        console.log(\"startGuide\", controller);\n\n        guidingController = controller;\n        guideLight.intensity = 1;\n        controller.add(guideline);\n        scene.add(guideSprite);\n    }\n\n    function onSelectEnd() {\n        if (guidingController === this) {\n            console.log(\"onSelectEnd\", this);\n\n            // first work out vector from feet to cursor\n\n            // feet position\n            const feetPos = renderer.xr.getCamera(camera).getWorldPosition(tempVec);\n            feetPos.y = 0;\n\n            // cursor position\n            const p = guidingController.getWorldPosition(tempVecP);\n            const v = guidingController.getWorldDirection(tempVecV);\n            v.multiplyScalar(6);\n            const t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\n            const cursorPos = positionAtT(tempVec1,t,p,v,g);\n\n            // Offset\n            const offset = cursorPos.addScaledVector(feetPos ,-1);\n\n            // Do the locomotion\n            locomotion(offset);\n\n            // clean up\n            guidingController = null;\n            guideLight.intensity = 0;\n            this.remove(guideline);\n            scene.remove(guideSprite);\n        }\n    }\n\n    function handleMove({detail}) {\n        // Turn left\n        if (detail.value > 0) {\n            cameraGroup.rotation.y -= Math.PI/4;\n        }\n        // Turn right\n        if (detail.value < 0) {\n            cameraGroup.rotation.y += Math.PI/4;\n        }\n    }\n\n    function handleUp({detail}) {\n        if (detail.value < 0) {\n            onSelectStart.bind(detail.controller)();\n        }\n    }\n    function handleUpEnd({detail}) {\n        onSelectEnd.bind(detail.controller)();\n    }\n\n    const gamepad = require('./gamepad').get(renderer, rafCallbacks);\n\n    gamepad.addEventListener('axes0MoveMiddle', handleMove, true);\n    gamepad.addEventListener('axes2MoveMiddle', handleMove, true);\n\n    gamepad.addEventListener('axes1MoveMiddle', handleUp, true);\n    gamepad.addEventListener('axes3MoveMiddle', handleUp, true);\n    gamepad.addEventListener('axes1MoveEnd', handleUpEnd, true);\n    gamepad.addEventListener('axes3MoveEnd', handleUpEnd, true);\n\n    controller1.addEventListener('selectstart', onSelectStart);\n    controller1.addEventListener('selectend', onSelectEnd);\n    controller2.addEventListener('selectstart', onSelectStart);\n    controller2.addEventListener('selectend', onSelectEnd);\n\n    rafCallbacks.add(() => {\n        if (guidingController) {\n            // Controller start position\n            const p = guidingController.getWorldPosition(tempVecP);\n\n            // Set Vector V to the direction of the controller, at 1m/s\n            const v = guidingController.getWorldDirection(tempVecV);\n\n            // Scale the initial velocity to 6m/s\n            v.multiplyScalar(6);\n\n            // Time for tele ball to hit ground\n            const t = (-v.y  + Math.sqrt(v.y**2 - 2*p.y*g.y))/g.y;\n\n            const vertex = tempVec.set(0,0,0);\n            for (let i=1; i<=lineSegments; i++) {\n\n                // set vertex to current position of the virtual ball at time t\n                positionAtT(vertex,i*t/lineSegments,p,v,g);\n                guidingController.worldToLocal(vertex);\n                vertex.toArray(lineGeometryVertices,i*3);\n            }\n            guideline.geometry.attributes.position.needsUpdate = true;\n\n            // Place the light and sprite near the end of the line\n            positionAtT(guideLight.position,t*0.98,p,v,g);\n            positionAtT(guideSprite.position,t*0.98,p,v,g);\n        }\n    });\n\n};\n\n"],"names":["$ilwiq","parcelRequire","module","exports","camera","cameraGroup","blinkerSphereGeometry","SphereBufferGeometry","translate","blinkerSphereMaterial","MeshBasicMaterial","side","BackSide","color","transparent","blinkerSphere","Mesh","rotation","set","Math","PI","position","visible","add","renderOrder","offset","material","opacity","$parcel$interopDefault","$4ZRPs","Tween","to","easing","Easing","Quadratic","Out","onComplete","start","exports1","a","now$1","Group","Interpolation","Sequence","mainGroup","VERSION","nextId","TWEEN","getAll","removeAll","remove","update","exports$1","$hPtJY","Linear","None","amount","In","InOut","Cubic","Quartic","Quintic","Sinusoidal","cos","sin","Exponential","pow","Circular","sqrt","Elastic","Back","s","Bounce","self","hrtime","time","undefined","performance","now","bind","Date","getTime","this","_tweens","_tweensAddedDuringUpdate","prototype","_this","Object","keys","map","tweenId","tween","getId","preserve","tweenIds","length","i","autoStart","v","k","m","f","floor","fn","Utils","Bezier","b","n","pw","bn","Bernstein","CatmullRom","p0","p1","t","fc","Factorial","p2","p3","v0","v1","t2","_nextId","_object","_group","_isPaused","_pauseStart","_valuesStart","_valuesEnd","_valuesStartRepeat","_duration","_initialRepeat","_repeat","_yoyo","_isPlaying","_reversed","_delayTime","_startTime","_easingFunction","_interpolationFunction","_chainedTweens","_onStartCallbackFired","_id","_isChainStopped","_goToEnd","isPlaying","isPaused","properties","duration","create","d","property","_swapEndStartRepeatValues","parseFloat","_setupProperties","startValue","startValueIsArray","Array","isArray","propType","isInterpolationList","endValues","_handleRelativeValue","concat","slice","reverse","prop","stop","stopChainedTweens","_onStopCallback","end","Infinity","pause","resume","numChainedTweens","group","delay","repeat","times","repeatDelay","_repeatDelayTime","yoyo","easingFunction","interpolation","interpolationFunction","chain","tweens","_i","arguments","onStart","callback","_onStartCallback","onUpdate","_onUpdateCallback","onRepeat","_onRepeatCallback","_onCompleteCallback","onStop","elapsed","endTime","value","_updateProperties","isFinite","startIsArray","endIsArray","charAt","tmp","endValue","default","defineProperty","$1d5299d7bf9f6b49$export$3988ae62b71be9a3","renderer","rafCallbacks","prevGamePads","Map","gamepad","EventTarget","dispatchEvent","type","detail","specificEvent","CustomEvent","generalDetail","assign","generalEvent","timestamp","frame","session","xr","getSession","source","inputSources","controller","getController","old","get","data","buttons","axes","forEach","abs","$3NNSQ","$2e81c5a0f10917ae$export$da3cdac99155b982","static","button","document","createElement","disableButton","style","display","cursor","left","width","onmouseenter","onmouseleave","onclick","stylizeElement","element","bottom","padding","border","borderRadius","background","font","textAlign","outline","zIndex","navigator","id","isSessionSupported","then","supported","currentSession","async","onSessionStarted","addEventListener","onSessionEnded","setSession","textContent","removeEventListener","sessionInit","optionalFeatures","requestSession","showEnterVR","xrSessionIsGranted","click","catch","exception","console","warn","message","window","isSecureContext","href","location","replace","innerHTML","textDecoration","test","userAgent","registerSessionGrantedListener","config","$7a8c3c23f3e49c64$export$a002182e51710d39","Handedness","freeze","NONE","LEFT","RIGHT","ComponentState","DEFAULT","TOUCHED","PRESSED","ComponentProperty","BUTTON","X_AXIS","Y_AXIS","STATE","ComponentType","TRIGGER","SQUEEZE","TOUCHPAD","THUMBSTICK","ButtonTouchThreshold","AxisTouchThreshold","VisualResponseProperty","TRANSFORM","VISIBILITY","$7a8c3c23f3e49c64$var$fetchJsonFile","path","response","fetch","ok","json","Error","statusText","$7a8c3c23f3e49c64$export$665d336fd546fbed","xrInputSource","basePath","defaultProfile","getAssetPath","supportedProfilesList","$7a8c3c23f3e49c64$export$cdc669b4504544b3","match","profiles","some","profileId","supportedProfile","profilePath","deprecated","profile","assetPath","layout","handedness","layouts","$7a8c3c23f3e49c64$var$defaultComponentValues","xAxis","yAxis","state","$7a8c3c23f3e49c64$var$VisualResponse","constructor","visualResponseDescription","componentProperty","states","valueNodeName","valueNodeProperty","minNodeName","maxNodeName","updateFromComponent","normalizedXAxis","normalizedYAxis","x","y","theta","atan2","$7a8c3c23f3e49c64$var$normalizeAxes","includes","$7a8c3c23f3e49c64$var$Component","componentId","componentDescription","visualResponses","gamepadIndices","rootNodeName","touchPointNodeName","responseName","visualResponse","values","updateFromGamepad","gamepadButton","pressed","touched","$7a8c3c23f3e49c64$export$d04f314260fc930a","assetUrl","layoutDescription","components","gripSpace","targetRaySpace","component","push","$e7e1ee5465c2c699$var$XRControllerModel","Object3D","super","motionController","envMap","setEnvironmentMap","traverse","child","isMesh","needsUpdate","updateMatrixWorld","force","valueNode","minNode","maxNode","quaternion","slerpQuaternions","lerpVectors","$e7e1ee5465c2c699$var$addAssetSceneToControllerModel","controllerModel","scene","touchPointNode","getObjectByName","sphereGeometry","SphereGeometry","sphere","$e7e1ee5465c2c699$var$findNodes","$1e39416a9737288d$var$_matrix","Matrix4","$1e39416a9737288d$var$_vector","Vector3","$1e39416a9737288d$export$31b2556b4cd059d","handModel","options","geometry","primitive","BoxGeometry","MeshStandardMaterial","handMesh","InstancedMesh","instanceMatrix","setUsage","DynamicDrawUsage","castShadow","receiveShadow","joints","updateMesh","count","joint","setScalar","jointRadius","compose","setMatrixAt","$7lx9d","$e32e5cb67549210a$export$bfa512d6162fb52e","bones","loader","GLTFLoader","setPath","load","gltf","object","children","mesh","getObjectByProperty","frustumCulled","jointName","bone","XRJoints","XRJoint","copy","$b600638a5ed0e434$var$XRHandModel","$cf7c6c3110abe81a$export$11e63f7b0f3d9900","$cf7c6c3110abe81a$var$controllerModelFactory","gltfLoader","_assetCache","createControllerModel","event","targetRayMode","cachedAsset","clone","asset","err","$cf7c6c3110abe81a$var$handModelFactory","createHandModel","hand","controllers","index","controllerGrip","getControllerGrip","model","getHand","grip","controller1","controller2","hand1","hand2","$1856153a8b5b5cfe$export$11e63f7b0f3d9900","locomotion","g","tempVec","tempVec1","tempVecP","tempVecV","positionAtT","inVec","p","addScaledVector","lineGeometry","BufferGeometry","lineGeometryVertices","Float32Array","fill","lineGeometryColors","setAttribute","BufferAttribute","lineMaterial","LineBasicMaterial","vertexColors","blending","AdditiveBlending","guideline","Line","guideLight","PointLight","guideSpriteTexture","TextureLoader","guideSprite","PlaneGeometry","guidingController","onSelectStart","e","log","intensity","onSelectEnd","feetPos","getCamera","getWorldPosition","getWorldDirection","multiplyScalar","handleMove","handleUp","handleUpEnd","vertex","worldToLocal","toArray","attributes","$6Awmu","displayPainting","clearPaintings","$443da268708619f4$var$gallery","$443da268708619f4$var$web3","$443da268708619f4$var$contract","$443da268708619f4$var$contractAddrReg","RegExp","$443da268708619f4$var$queryParams","Proxy","URLSearchParams","search","searchParams","$443da268708619f4$var$gltfLoader","$443da268708619f4$var$scene","Scene","$443da268708619f4$var$camera","PerspectiveCamera","innerWidth","innerHeight","$443da268708619f4$var$cameraGroup","$443da268708619f4$var$renderer","WebGLRenderer","antialias","$443da268708619f4$var$onWindowResize","aspect","updateProjectionMatrix","setSize","shadowMap","enabled","Color","init3d","Promise","resolve","reject","galleryPreset","$fZ8NE","findById","scale","z","fov","postRenderModifier","Set","controllerGrip1","controllerGrip2","setAnimationLoop","cb","render","error","body","appendChild","domElement","createButton","loadGallery","alert","eth","Contract","$33SoD","$hXJAl","show","galleryIndex","parseInt","methods","getGalleryIndex","call","paintings","getPaintings","painting","$443da268708619f4$require$displayPainting","posX","posY","posZ","rotX","rotY","rotZ","url","hide"],"version":3,"file":"gallery.f31ff6c5.js.map"}