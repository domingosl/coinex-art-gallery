function e(e){return e&&e.__esModule?e.default:e}var t="undefined"!=typeof globalThis?globalThis:"undefined"!=typeof self?self:"undefined"!=typeof window?window:"undefined"!=typeof global?global:{},n={},o={},s=t.parcelRequire4141;null==s&&((s=function(e){if(e in n)return n[e].exports;if(e in o){var t=o[e];delete o[e];var s={id:e,exports:{}};return n[e]=s,t.call(s.exports,s,s.exports),s.exports}var i=new Error("Cannot find module '"+e+"'");throw i.code="MODULE_NOT_FOUND",i}).register=function(e,t){o[e]=t},t.parcelRequire4141=s),s.register("2xTO9",(function(e,t){e.exports=(e,t)=>function(e){t.position.add(e)}})),s.register("2w5cf",(function(e,t){var n,o,s,i,a;n=e.exports,o="get",s=()=>a,i=e=>a=e,Object.defineProperty(n,o,{get:s,set:i,enumerable:!0,configurable:!0}),a=(e,t)=>{const n=new Map,o=new EventTarget;function s(e,t){const n=new CustomEvent(e,{detail:t}),s={type:e};Object.assign(s,t);const i=new CustomEvent("gamepadInteraction",{detail:s});o.dispatchEvent(n),o.dispatchEvent(i)}return t.add(((t,o)=>{const i=e.xr.getSession();let a=0;if(i)for(const t of i.inputSources){if(!t.gamepad)continue;const o=e.xr.getController(a++),i=n.get(t),r={buttons:t.gamepad.buttons.map((e=>e.value)),axes:t.gamepad.axes.slice(0)};i&&(r.buttons.forEach(((e,n)=>{e!==i.buttons[n]&&s(1===e?`button${n}Down`:`button${n}Up`,{value:e,source:t,controller:o,data:r})})),r.axes.forEach(((e,n)=>{e!==i.axes[n]&&(s(`axes${n}Move`,{value:e,source:t,controller:o,data:r}),0===i.axes[n]&&s(`axes${n}MoveStart`,{value:e,source:t,controller:o,data:r}),Math.abs(i.axes[n])<.5&&Math.abs(e)>.5&&s(`axes${n}MoveMiddle`,{value:e,source:t,controller:o,data:r}),0===e&&s(`axes${n}MoveEnd`,{value:e,source:t,controller:o,data:r}))}))),n.set(t,r)}})),o}}));var i=s("dcZZ4"),a=s("3NNSQ"),r=s("33SoD"),l=s("ilwiq"),d=s("7lx9d");class c{static createButton(e){const t=document.createElement("button");function n(){t.style.display="",t.style.cursor="auto",t.style.left="calc(50% - 75px)",t.style.width="150px",t.onmouseenter=null,t.onmouseleave=null,t.onclick=null}function o(e){e.style.position="absolute",e.style.bottom="20px",e.style.padding="12px 6px",e.style.border="1px solid #fff",e.style.borderRadius="4px",e.style.background="rgba(0,0,0,0.1)",e.style.color="#fff",e.style.font="normal 13px sans-serif",e.style.textAlign="center",e.style.opacity="0.5",e.style.outline="none",e.style.zIndex="999"}if("xr"in navigator)return t.id="VRButton",t.style.display="none",o(t),navigator.xr.isSessionSupported("immersive-vr").then((function(o){o?function(){let n=null;async function o(o){o.addEventListener("end",s),await e.xr.setSession(o),t.textContent="EXIT VR",n=o}function s(){n.removeEventListener("end",s),t.textContent="ENTER VR",n=null}t.style.display="",t.style.cursor="pointer",t.style.left="calc(50% - 50px)",t.style.width="100px",t.textContent="ENTER VR",t.onmouseenter=function(){t.style.opacity="1.0"},t.onmouseleave=function(){t.style.opacity="0.5"},t.onclick=function(){if(null===n){const e={optionalFeatures:["local-floor","bounded-floor","hand-tracking","layers"]};navigator.xr.requestSession("immersive-vr",e).then(o)}else n.end()}}():(n(),t.textContent="VR NOT SUPPORTED"),o&&c.xrSessionIsGranted&&t.click()})).catch((function(e){n(),console.warn("Exception when trying to call xr.isSessionSupported",e),t.textContent="VR NOT ALLOWED"})),t;{const e=document.createElement("a");return!1===window.isSecureContext?(e.href=document.location.href.replace(/^http:/,"https:"),e.innerHTML="WEBXR NEEDS HTTPS"):(e.href="https://immersiveweb.dev/",e.innerHTML="WEBXR NOT AVAILABLE"),e.style.left="calc(50% - 90px)",e.style.width="180px",e.style.textDecoration="none",o(e),e}}static xrSessionIsGranted=!1;static registerSessionGrantedListener(){if("xr"in navigator){if(/WebXRViewer\//i.test(navigator.userAgent))return;navigator.xr.addEventListener("sessiongranted",(()=>{c.xrSessionIsGranted=!0}))}}}c.registerSessionGrantedListener(),s("8vghX").config();var p=s("hXJAl"),h=s("fZ8NE");l=s("ilwiq"),d=s("7lx9d");const u={Handedness:Object.freeze({NONE:"none",LEFT:"left",RIGHT:"right"}),ComponentState:Object.freeze({DEFAULT:"default",TOUCHED:"touched",PRESSED:"pressed"}),ComponentProperty:Object.freeze({BUTTON:"button",X_AXIS:"xAxis",Y_AXIS:"yAxis",STATE:"state"}),ComponentType:Object.freeze({TRIGGER:"trigger",SQUEEZE:"squeeze",TOUCHPAD:"touchpad",THUMBSTICK:"thumbstick",BUTTON:"button"}),ButtonTouchThreshold:.05,AxisTouchThreshold:.1,VisualResponseProperty:Object.freeze({TRANSFORM:"transform",VISIBILITY:"visibility"})};async function m(e){const t=await fetch(e);if(t.ok)return t.json();throw new Error(t.statusText)}async function f(e,t,n=null,o=!0){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No basePath supplied");const s=await async function(e){if(!e)throw new Error("No basePath supplied");return await m(`${e}/profilesList.json`)}(t);let i;if(e.profiles.some((e=>{const n=s[e];return n&&(i={profileId:e,profilePath:`${t}/${n.path}`,deprecated:!!n.deprecated}),!!i})),!i){if(!n)throw new Error("No matching profile name found");const e=s[n];if(!e)throw new Error(`No matching profile name found and default profile "${n}" missing.`);i={profileId:n,profilePath:`${t}/${e.path}`,deprecated:!!e.deprecated}}const a=await m(i.profilePath);let r;if(o){let t;if(t="any"===e.handedness?a.layouts[Object.keys(a.layouts)[0]]:a.layouts[e.handedness],!t)throw new Error(`No matching handedness, ${e.handedness}, in profile ${i.profileId}`);t.assetPath&&(r=i.profilePath.replace("profile.json",t.assetPath))}return{profile:a,assetPath:r}}const x={xAxis:0,yAxis:0,button:0,state:u.ComponentState.DEFAULT};class g{constructor(e){this.componentProperty=e.componentProperty,this.states=e.states,this.valueNodeName=e.valueNodeName,this.valueNodeProperty=e.valueNodeProperty,this.valueNodeProperty===u.VisualResponseProperty.TRANSFORM&&(this.minNodeName=e.minNodeName,this.maxNodeName=e.maxNodeName),this.value=0,this.updateFromComponent(x)}updateFromComponent({xAxis:e,yAxis:t,button:n,state:o}){const{normalizedXAxis:s,normalizedYAxis:i}=function(e=0,t=0){let n=e,o=t;if(Math.sqrt(e*e+t*t)>1){const s=Math.atan2(t,e);n=Math.cos(s),o=Math.sin(s)}return{normalizedXAxis:.5*n+.5,normalizedYAxis:.5*o+.5}}(e,t);switch(this.componentProperty){case u.ComponentProperty.X_AXIS:this.value=this.states.includes(o)?s:.5;break;case u.ComponentProperty.Y_AXIS:this.value=this.states.includes(o)?i:.5;break;case u.ComponentProperty.BUTTON:this.value=this.states.includes(o)?n:0;break;case u.ComponentProperty.STATE:this.valueNodeProperty===u.VisualResponseProperty.VISIBILITY?this.value=this.states.includes(o):this.value=this.states.includes(o)?1:0;break;default:throw new Error(`Unexpected visualResponse componentProperty ${this.componentProperty}`)}}}class v{constructor(e,t){if(!(e&&t&&t.visualResponses&&t.gamepadIndices&&0!==Object.keys(t.gamepadIndices).length))throw new Error("Invalid arguments supplied");this.id=e,this.type=t.type,this.rootNodeName=t.rootNodeName,this.touchPointNodeName=t.touchPointNodeName,this.visualResponses={},Object.keys(t.visualResponses).forEach((e=>{const n=new g(t.visualResponses[e]);this.visualResponses[e]=n})),this.gamepadIndices=Object.assign({},t.gamepadIndices),this.values={state:u.ComponentState.DEFAULT,button:void 0!==this.gamepadIndices.button?0:void 0,xAxis:void 0!==this.gamepadIndices.xAxis?0:void 0,yAxis:void 0!==this.gamepadIndices.yAxis?0:void 0}}get data(){return{id:this.id,...this.values}}updateFromGamepad(e){if(this.values.state=u.ComponentState.DEFAULT,void 0!==this.gamepadIndices.button&&e.buttons.length>this.gamepadIndices.button){const t=e.buttons[this.gamepadIndices.button];this.values.button=t.value,this.values.button=this.values.button<0?0:this.values.button,this.values.button=this.values.button>1?1:this.values.button,t.pressed||1===this.values.button?this.values.state=u.ComponentState.PRESSED:(t.touched||this.values.button>u.ButtonTouchThreshold)&&(this.values.state=u.ComponentState.TOUCHED)}void 0!==this.gamepadIndices.xAxis&&e.axes.length>this.gamepadIndices.xAxis&&(this.values.xAxis=e.axes[this.gamepadIndices.xAxis],this.values.xAxis=this.values.xAxis<-1?-1:this.values.xAxis,this.values.xAxis=this.values.xAxis>1?1:this.values.xAxis,this.values.state===u.ComponentState.DEFAULT&&Math.abs(this.values.xAxis)>u.AxisTouchThreshold&&(this.values.state=u.ComponentState.TOUCHED)),void 0!==this.gamepadIndices.yAxis&&e.axes.length>this.gamepadIndices.yAxis&&(this.values.yAxis=e.axes[this.gamepadIndices.yAxis],this.values.yAxis=this.values.yAxis<-1?-1:this.values.yAxis,this.values.yAxis=this.values.yAxis>1?1:this.values.yAxis,this.values.state===u.ComponentState.DEFAULT&&Math.abs(this.values.yAxis)>u.AxisTouchThreshold&&(this.values.state=u.ComponentState.TOUCHED)),Object.values(this.visualResponses).forEach((e=>{e.updateFromComponent(this.values)}))}}class y{constructor(e,t,n){if(!e)throw new Error("No xrInputSource supplied");if(!t)throw new Error("No profile supplied");this.xrInputSource=e,this.assetUrl=n,this.id=t.profileId,this.layoutDescription=t.layouts[e.handedness],this.components={},Object.keys(this.layoutDescription.components).forEach((e=>{const t=this.layoutDescription.components[e];this.components[e]=new v(e,t)})),this.updateFromGamepad()}get gripSpace(){return this.xrInputSource.gripSpace}get targetRaySpace(){return this.xrInputSource.targetRaySpace}get data(){const e=[];return Object.values(this.components).forEach((t=>{e.push(t.data)})),e}updateFromGamepad(){Object.values(this.components).forEach((e=>{e.updateFromGamepad(this.xrInputSource.gamepad)}))}}class w extends l.Object3D{constructor(){super(),this.motionController=null,this.envMap=null}setEnvironmentMap(e){return this.envMap==e||(this.envMap=e,this.traverse((e=>{e.isMesh&&(e.material.envMap=this.envMap,e.material.needsUpdate=!0)}))),this}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&(this.motionController.updateFromGamepad(),Object.values(this.motionController.components).forEach((e=>{Object.values(e.visualResponses).forEach((e=>{const{valueNode:t,minNode:n,maxNode:o,value:s,valueNodeProperty:i}=e;t&&(i===u.VisualResponseProperty.VISIBILITY?t.visible=s:i===u.VisualResponseProperty.TRANSFORM&&(t.quaternion.slerpQuaternions(n.quaternion,o.quaternion,s),t.position.lerpVectors(n.position,o.position,s)))}))})))}}function b(e,t){!function(e,t){Object.values(e.components).forEach((e=>{const{type:n,touchPointNodeName:o,visualResponses:s}=e;if(n===u.ComponentType.TOUCHPAD)if(e.touchPointNode=t.getObjectByName(o),e.touchPointNode){const t=new(0,l.SphereGeometry)(.001),n=new(0,l.MeshBasicMaterial)({color:255}),o=new(0,l.Mesh)(t,n);e.touchPointNode.add(o)}else console.warn(`Could not find touch dot, ${e.touchPointNodeName}, in touchpad component ${e.id}`);Object.values(s).forEach((e=>{const{valueNodeName:n,minNodeName:o,maxNodeName:s,valueNodeProperty:i}=e;if(i===u.VisualResponseProperty.TRANSFORM){if(e.minNode=t.getObjectByName(o),e.maxNode=t.getObjectByName(s),!e.minNode)return void console.warn(`Could not find ${o} in the model`);if(!e.maxNode)return void console.warn(`Could not find ${s} in the model`)}e.valueNode=t.getObjectByName(n),e.valueNode||console.warn(`Could not find ${n} in the model`)}))}))}(e.motionController,t),e.envMap&&t.traverse((t=>{t.isMesh&&(t.material.envMap=e.envMap,t.material.needsUpdate=!0)})),e.add(t)}l=s("ilwiq");const E=new(0,(l=s("ilwiq")).Matrix4),M=new(0,l.Vector3);class A{constructor(e,t,n,o,s){let i;this.controller=t,this.handModel=e,this.envMap=null,s&&s.primitive&&"sphere"!==s.primitive?"box"===s.primitive&&(i=new(0,l.BoxGeometry)(1,1,1)):i=new(0,l.SphereGeometry)(1,10,10);const a=new(0,l.MeshStandardMaterial);this.handMesh=new(0,l.InstancedMesh)(i,a,30),this.handMesh.instanceMatrix.setUsage(l.DynamicDrawUsage),this.handMesh.castShadow=!0,this.handMesh.receiveShadow=!0,this.handModel.add(this.handMesh),this.joints=["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"]}updateMesh(){const e=this.controller.joints;let t=0;for(let n=0;n<this.joints.length;n++){const o=e[this.joints[n]];o.visible&&(M.setScalar(o.jointRadius||.008),E.compose(o.position,o.quaternion,M),this.handMesh.setMatrixAt(n,E),t++)}this.handMesh.count=t,this.handMesh.instanceMatrix.needsUpdate=!0}}d=s("7lx9d");class N{constructor(e,t,n,o){this.controller=t,this.handModel=e,this.bones=[];const s=new(0,d.GLTFLoader);s.setPath(n||"https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles/generic-hand/"),s.load(`${o}.glb`,(e=>{const t=e.scene.children[0];this.handModel.add(t);const n=t.getObjectByProperty("type","SkinnedMesh");n.frustumCulled=!1,n.castShadow=!0,n.receiveShadow=!0;["wrist","thumb-metacarpal","thumb-phalanx-proximal","thumb-phalanx-distal","thumb-tip","index-finger-metacarpal","index-finger-phalanx-proximal","index-finger-phalanx-intermediate","index-finger-phalanx-distal","index-finger-tip","middle-finger-metacarpal","middle-finger-phalanx-proximal","middle-finger-phalanx-intermediate","middle-finger-phalanx-distal","middle-finger-tip","ring-finger-metacarpal","ring-finger-phalanx-proximal","ring-finger-phalanx-intermediate","ring-finger-phalanx-distal","ring-finger-tip","pinky-finger-metacarpal","pinky-finger-phalanx-proximal","pinky-finger-phalanx-intermediate","pinky-finger-phalanx-distal","pinky-finger-tip"].forEach((e=>{const n=t.getObjectByName(e);void 0!==n?n.jointName=e:console.warn(`Couldn't find ${e} in ${o} hand mesh`),this.bones.push(n)}))}))}updateMesh(){const e=this.controller.joints;for(let t=0;t<this.bones.length;t++){const n=this.bones[t];if(n){const t=e[n.jointName];if(t.visible){const e=t.position;n.position.copy(e),n.quaternion.copy(t.quaternion)}}}}}class S extends l.Object3D{constructor(e){super(),this.controller=e,this.motionController=null,this.envMap=null,this.mesh=null}updateMatrixWorld(e){super.updateMatrixWorld(e),this.motionController&&this.motionController.updateMesh()}}var C;const P=new class{constructor(e=null){this.gltfLoader=e,this.path="https://cdn.jsdelivr.net/npm/@webxr-input-profiles/assets@1.0/dist/profiles",this._assetCache={},this.gltfLoader||(this.gltfLoader=new(0,d.GLTFLoader))}createControllerModel(e){const t=new w;let n=null;return e.addEventListener("connected",(e=>{const o=e.data;"tracked-pointer"===o.targetRayMode&&o.gamepad&&f(o,this.path,"generic-trigger").then((({profile:e,assetPath:s})=>{t.motionController=new y(o,e,s);const i=this._assetCache[t.motionController.assetUrl];if(i)n=i.scene.clone(),b(t,n);else{if(!this.gltfLoader)throw new Error("GLTFLoader not set.");this.gltfLoader.setPath(""),this.gltfLoader.load(t.motionController.assetUrl,(e=>{this._assetCache[t.motionController.assetUrl]=e,n=e.scene.clone(),b(t,n)}),null,(()=>{throw new Error(`Asset ${t.motionController.assetUrl} missing or malformed.`)}))}})).catch((e=>{console.warn(e)}))})),e.addEventListener("disconnected",(()=>{t.motionController=null,t.remove(n),n=null})),t}},T=new class{constructor(){this.path=null}setPath(e){return this.path=e,this}createHandModel(e,t){const n=new S(e);return e.addEventListener("connected",(o=>{const s=o.data;s.hand&&!n.motionController&&(n.xrInputSource=s,void 0===t||"spheres"===t?n.motionController=new A(n,e,this.path,s.handedness,{primitive:"sphere"}):"boxes"===t?n.motionController=new A(n,e,this.path,s.handedness,{primitive:"box"}):"mesh"===t&&(n.motionController=new N(n,e,this.path,s.handedness))),e.visible=!0})),e.addEventListener("disconnected",(()=>{e.visible=!1})),n}};C=(e,t)=>{const n=[0,1].map((function(n){const o=e.xr.getController(n);t.add(o);const s=e.xr.getControllerGrip(n),i=P.createControllerModel(s);s.add(i),t.add(s);const a=e.xr.getHand(n);return a.add(T.createHandModel(a,"mesh")),t.add(a),{hand:a,grip:s,controller:o}})),o=n[0].controller,s=n[1].controller,i=n[0].hand,a=n[1].hand;return{controller1:o,controller2:s,controllerGrip1:n[0].grip,controllerGrip2:n[1].grip,hand1:i,hand2:a}};var L;l=s("ilwiq");L=(e,t,n,o,i,a,r)=>{const d=s("2xTO9")(n,o),c=new(0,l.Vector3)(0,-9.8,0),p=new(0,l.Vector3),h=new(0,l.Vector3),u=new(0,l.Vector3),m=new(0,l.Vector3);function f(e,t,n,o,s){return e.copy(n),e.addScaledVector(o,t),e.addScaledVector(s,.5*t**2),e}const x=new(0,l.BufferGeometry),g=new Float32Array(63);g.fill(0);const v=new Float32Array(63);v.fill(.5),x.setAttribute("position",new(0,l.BufferAttribute)(g,3)),x.setAttribute("color",new(0,l.BufferAttribute)(v,3));const y=new(0,l.LineBasicMaterial)({vertexColors:!0,blending:l.AdditiveBlending}),w=new(0,l.Line)(x,y),b=new(0,l.PointLight)(16772778,0,2),E=(new(0,l.TextureLoader)).load("/assets/img/target.png"),M=new(0,l.Mesh)(new(0,l.PlaneGeometry)(.3,.3,1,1),new(0,l.MeshBasicMaterial)({map:E,blending:l.AdditiveBlending,color:5592405,transparent:!0}));M.rotation.x=-Math.PI/2;let A=null;function N(t){if(t&&t.data&&t.data.hand)return;const n=this;console.log("startGuide",n),A=n,b.intensity=1,n.add(w),e.add(M)}const S=new(0,l.Raycaster);function C(){if(A===this){console.log("onSelectEnd",this);const o=t.xr.getCamera(n).getWorldPosition(p);o.y=0;const s=A.getWorldPosition(u),i=A.getWorldDirection(m);i.multiplyScalar(6);const a=(-i.y+Math.sqrt(i.y**2-2*s.y*c.y))/c.y,r=f(h,a,s,i,c),x=t.xr.getCamera(n).position,g=new(0,l.Vector3);g.subVectors(r,x).normalize(),S.set(x,g);const v=S.intersectObjects(e.children);let y=!1;for(const e of v)if("Mesh"===e.object.type&&e.point.y>=.1){console.log("COLLISION FOUND!",e.point),y=!0;break}const E=r.addScaledVector(o,-1);!y&&d(E),A=null,b.intensity=0,this.remove(w),e.remove(M)}}function P({detail:e}){e.value>0&&(o.rotation.y-=Math.PI/4),e.value<0&&(o.rotation.y+=Math.PI/4)}function T({detail:e}){e.value<0&&N.bind(e.controller)()}function L({detail:e}){C.bind(e.controller)()}const I=s("2w5cf").get(t,i);I.addEventListener("axes0MoveMiddle",P,!0),I.addEventListener("axes2MoveMiddle",P,!0),I.addEventListener("axes1MoveMiddle",T,!0),I.addEventListener("axes3MoveMiddle",T,!0),I.addEventListener("axes1MoveEnd",L,!0),I.addEventListener("axes3MoveEnd",L,!0),a.addEventListener("selectstart",N),a.addEventListener("selectend",C),r.addEventListener("selectstart",N),r.addEventListener("selectend",C),i.add((()=>{if(A){const e=A.getWorldPosition(u),t=A.getWorldDirection(m);t.multiplyScalar(6);const n=(-t.y+Math.sqrt(t.y**2-2*e.y*c.y))/c.y,o=p.set(0,0,0);for(let s=1;s<=20;s++)f(o,s*n/20,e,t,c),A.worldToLocal(o),o.toArray(g,3*s);w.geometry.attributes.position.needsUpdate=!0,f(b.position,.99*n,e,t,c),f(M.position,.99*n,e,t,c)}}))};var I=s("6Awmu"),O=I.displayPainting;I.clearPaintings;let R,j;const B=new RegExp("^0x[a-fA-F0-9]{40}$"),U=new Proxy(new URLSearchParams(window.location.search),{get:(e,t)=>e.get(t)}),D=new l.AudioListener,G=new(0,d.GLTFLoader),F=new l.Scene;let V=new l.PerspectiveCamera(75,window.innerWidth/window.innerHeight,.1,1e3);V.add(D);const k=new l.Group;k.add(V);const $=new l.WebGLRenderer({antialias:!0});function z(){V.aspect=window.innerWidth/window.innerHeight,V.updateProjectionMatrix(),$.setSize(window.innerWidth,window.innerHeight)}$.shadowMap.enabled=!0,F.background=new l.Color(135,206,235),$.setSize(window.innerWidth,window.innerHeight),$.xr.enabled=!0,window.init3d=e=>new Promise(((t,n)=>{let o;const s=h.findById(e);console.log("Gallery Preset:",s),G.load(s.location,(async function(e){o=e.scene,o.scale.set(s.scene.scale,s.scene.scale,s.scene.scale),o.position.set(s.scene.position.x,s.scene.position.y,s.scene.position.z),o.rotation.set(s.scene.rotation.x,s.scene.rotation.y,s.scene.rotation.z),V.fov=s.camera.fov,V.updateProjectionMatrix(),V.position.set(s.camera.position.x,s.camera.position.y,s.camera.position.z),"function"==typeof s.postRenderModifier&&await s.postRenderModifier(o),F.add(k);const n=new Set;let i=new l.Audio(D);$.xr.addEventListener("sessionstart",(function(){k.position.x=s.camera.position.x,k.position.z=s.camera.position.z;const{controller1:e,controller2:t}=C($,k);L(F,$,V,k,n,e,t);(new l.AudioLoader).load("/assets/music/ambient.mp3",(function(e){i.setBuffer(e),i.setLoop(!0),i.setVolume(.1),i.play()}))})),$.xr.addEventListener("sessionend",(function(){i.stop()})),window.addEventListener("resize",z,!1),z(),$.setAnimationLoop((function(e,t){n.forEach((n=>n(e,t))),$.render(F,V)})),t(o)}),(()=>{}),(e=>{console.log(e),n()})),document.body.appendChild($.domElement)})),window.loadGallery=async()=>{if(!B.test(U.g)&&"example1"!==U.g&&"example2"!==U.g)return alert("Invalid Gallery Address!");R=new(e(a))("https://rpc.coinex.net"),j=new R.eth.Contract(e(r),"example1"===U.g?"0x9b885026846AE944f087bF23f359523606f08AEC":"example2"===U.g?"0xc5709eB9273f8d84EE1B462DbC7d55329F0a786A":U.g),p.show(),p.showStatus("Please wait while the gallery is being loaded");const t=parseInt(await j.methods.getGalleryIndex().call()),n=await j.methods.getPaintings().call();console.log("Paintings",n);const o=await init3d(t),s=h.findById(t),l=[];let d=!1;for(const e in n)try{l.push(await O(o,n[e].posX,n[e].posY,n[e].posZ,n[e].rotX,n[e].rotY,n[e].rotZ,n[e].width,n[e].aspect,n[e].name,s.textSize,n[e].url))}catch(e){d=!0}await Promise.allSettled(l),F.add(o);const u=c.createButton($);u.classList.add("animate__animated"),u.classList.add("animate__infinite"),setTimeout((()=>u.classList.add("animate__pulse")),500),document.body.appendChild(u),d&&e(i).fire({title:"oh oh!",html:"We were not able to load at least one the paintings.",icon:"error"}),p.hide()},loadGallery();
//# sourceMappingURL=gallery.8455e1ac.js.map
